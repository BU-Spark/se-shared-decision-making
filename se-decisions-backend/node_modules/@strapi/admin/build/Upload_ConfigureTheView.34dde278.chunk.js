"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[9514],{1372:function(P,p,t){t.r(p),t.d(p,{default:function(){return H}});var e=t(32735),y=t(5636),T=t(89793),A=t.n(T),N=t(60216),r=t.n(N),n=t(39161),u=t(13478),m=t(57269),d=t(20069),E=t(68781);const C=({sort:s="",pageSize:o=10,onChange:i})=>{const{formatMessage:l}=(0,y.useIntl)();return e.createElement(n.Box,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(n.Grid,{gap:4},e.createElement(n.GridItem,{s:12,col:6},e.createElement(n.Select,{label:l({id:(0,d.Z)("config.entries.title"),defaultMessage:"Entries per page"}),hint:l({id:(0,d.Z)("config.entries.note"),defaultMessage:"Number of assets displayed by default in the Media Library"}),onChange:a=>i({target:{name:"pageSize",value:a}}),name:"pageSize",value:o,"test-pageSize":o,"data-testid":"pageSize-select"},E.ay.map(a=>e.createElement(n.Option,{"data-testid":`pageSize-option-${a}`,key:a,value:a},a)))),e.createElement(n.GridItem,{s:12,col:6},e.createElement(n.Select,{label:l({id:(0,d.Z)("config.sort.title"),defaultMessage:"Default sort order"}),hint:l({id:(0,d.Z)("config.note"),defaultMessage:"Note: You can override this value in the media library."}),onChange:a=>i({target:{name:"sort",value:a}}),name:"sort",value:s,"test-sort":s,"data-testid":"sort-select"},E.Fo.map(a=>e.createElement(n.Option,{"data-testid":`sort-option-${a.value}`,key:a.key,value:a.value},l({id:(0,d.Z)(a.key),defaultMessage:`${a.value}`})))))))};C.propTypes={sort:r().string.isRequired,pageSize:r().number.isRequired,onChange:r().func.isRequired};var R=t(97889),I=t(3040),B=t.n(I),O=t(33795),z=t.n(O),f=t(74951);const D=`${f.Z}/ON_CHANGE`,S=`${f.Z}/SET_LOADED`,v={initialData:{},modifiedData:{}},M=s=>({...v,initialData:s,modifiedData:s});var $=(s=v,o)=>(0,R.default)(s,i=>{switch(o.type){case D:{B()(i,["modifiedData",...o.keys.split(".")],o.value);break}case S:{const l=M(z()(i,["modifiedData"],{}));i.initialData=l.initialData,i.modifiedData=l.modifiedData;break}default:return i}});const G=({name:s,value:o})=>({type:D,keys:s,value:o}),W=()=>({type:S});var F=t(68715);const L=({config:s})=>{const{trackUsage:o}=(0,u.useTracking)(),{formatMessage:i}=(0,y.useIntl)(),l=(0,u.useNotification)(),{mutateConfig:a}=(0,F.Z)(),{isLoading:b}=a,[k,U]=(0,e.useState)(!1),h=()=>U(g=>!g),[V,Z]=(0,e.useReducer)($,v,()=>M(s)),{initialData:x,modifiedData:c}=V,Y=g=>{g.preventDefault(),h()},j=async()=>{o("willEditMediaLibraryConfig"),await a.mutateAsync(c),h(),Z(W()),l({type:"success",message:{id:"notification.form.success.fields",defaultMessage:"Changes saved"}})},J=({target:{name:g,value:K}})=>{Z(G({name:g,value:K}))};return(0,u.useFocusWhenNavigate)(),e.createElement(n.Layout,null,e.createElement(n.Main,{"aria-busy":b},e.createElement("form",{onSubmit:Y},e.createElement(n.HeaderLayout,{navigationAction:e.createElement(u.Link,{startIcon:e.createElement(m.ArrowLeft,null),to:`/plugins/${f.Z}`,id:"go-back"},i({id:(0,d.Z)("config.back"),defaultMessage:"Back"})),primaryAction:e.createElement(n.Button,{size:"S",startIcon:e.createElement(m.Check,null),disabled:A()(c,x),type:"submit"},i({id:"global.save",defaultMessage:"Save"})),subtitle:i({id:(0,d.Z)("config.subtitle"),defaultMessage:"Define the view settings of the media library."}),title:i({id:(0,d.Z)("config.title"),defaultMessage:"Configure the view - Media Library"})}),e.createElement(n.ContentLayout,null,e.createElement(C,{"data-testid":"settings",pageSize:c.pageSize||"",sort:c.sort||"",onChange:J})),e.createElement(u.ConfirmDialog,{bodyText:{id:(0,d.Z)("config.popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:e.createElement(m.Check,null),isConfirmButtonLoading:b,isOpen:k,onToggleDialog:h,onConfirm:j,variantRightButton:"success-light"}))))};L.propTypes={config:r().shape({pageSize:r().number,sort:r().string}).isRequired};var H=L}}]);
