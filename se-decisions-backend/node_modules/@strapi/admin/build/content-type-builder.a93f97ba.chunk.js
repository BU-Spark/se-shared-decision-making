"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[8880],{25747:function(Ae,ne,g){var a=g(32735),w=g(83292),ye=g(60216),$=g.n(ye),M=g(39161),l=g.n(M),P=g(57269),V=g.n(P),Ze=g(13478),n=g.n(Ze);const q={biginteger:P.Number,boolean:P.Boolean,collectionType:P.CollectionType,component:P.Component,contentType:P.CollectionType,date:P.Date,datetime:P.Date,decimal:P.Number,dynamiczone:P.DynamicZone,email:P.Email,enum:P.Enumeration,enumeration:P.Enumeration,file:P.Media,files:P.Media,float:P.Number,integer:P.Number,json:P.Json,JSON:P.Json,media:P.Media,number:P.Number,password:P.Password,relation:P.Relation,richtext:P.RichText,singleType:P.SingleType,string:P.Text,text:P.Text,time:P.Date,timestamp:P.Date,uid:P.Uid},be=(0,w.default)(M.Box)`
  svg {
    height: 100%;
    width: 100%;
  }
`,ke=({type:je,customField:Ce,...d})=>{const Me=(0,Ze.useCustomFields)();let We=q[je];if(Ce){const{icon:O}=Me.get(Ce);O&&(We=O)}return q[je]?a.createElement(be,{height:(0,Ze.pxToRem)(24),width:(0,Ze.pxToRem)(32),shrink:0,...d,"aria-hidden":!0},a.createElement(M.Box,{as:We})):null};ke.defaultProps={customField:null},ke.propTypes={type:$().string.isRequired,customField:$().string},ne.Z=ke},74753:function(Ae,ne,g){var a=g(32735);const w=(0,a.createContext)();ne.Z=w},51216:function(Ae,ne,g){var a=g(32735);const w=(0,a.createContext)();ne.Z=w},198:function(Ae,ne,g){var a=g(32735),w=g(74753);const ye=()=>(0,a.useContext)(w.Z);ne.Z=ye},32237:function(Ae,ne,g){var a=g(32735),w=g(51216);const ye=()=>(0,a.useContext)(w.Z);ne.Z=ye},97165:function(Ae,ne,g){g.r(ne),g.d(ne,{default:function(){return To}});var a=g(32735),w=g(5141),ye=g(99357),$=g(5636),M=g(13478),l=g(39161),P=g(3633),V=g(25158),Ze=g(60216),n=g.n(Ze),q=g(92891),be=g(4409),ke=g(13055),je=g(74753),Ce=g(32237),d=g(92318),Me=g(37087),We=g(33795),O=g.n(We),An=g(23973),Zn=g.n(An),Fn=g(3040),Sn=g.n(Fn),qn=g(59578),Pe=g.n(qn),Ee=g(198),Nn=g(23940),he=g.n(Nn);const Ln=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],He=({intlLabel:e,name:t,onChange:o,value:s})=>{const{formatMessage:r}=(0,$.useIntl)(),i=s===null||s.length===0?r({id:"global.none",defaultMessage:"None"}):[...s].sort().map(c=>he()(c)).join(", "),u=e.id?r({id:e.id,defaultMessage:e.defaultMessage}):t;return a.createElement(l.MultiSelectNested,{id:"select1",label:u,customizeContent:()=>i,onChange:c=>{c.length>0?o({target:{name:t,value:c,type:"allowed-types-select"}}):o({target:{name:t,value:null,type:"allowed-types-select"}})},options:Ln,value:s||[]})};He.defaultProps={value:null},He.propTypes={intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,name:n().string.isRequired,onChange:n().func.isRequired,value:n().oneOfType([n().object,n().array])};var In=He,Dt=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0),ze=g(25747),Fe=g(83292),kt=(0,Fe.default)(l.Box)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`;const Ke=({type:e})=>{const{formatMessage:t}=(0,$.useIntl)(),{onClickSelectField:o}=(0,Ce.Z)(),s=()=>{o({attributeType:e,step:e==="component"?"1":null})};return a.createElement(kt,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:s},a.createElement(l.Flex,null,a.createElement(ze.Z,{type:e}),a.createElement(l.Box,{paddingLeft:4},a.createElement(l.Flex,null,a.createElement(l.Typography,{fontWeight:"bold"},t({id:(0,d.Z)(`attribute.${e}`),defaultMessage:e}))),a.createElement(l.Flex,null,a.createElement(l.Typography,{variant:"pi",textColor:"neutral600"},t({id:(0,d.Z)(`attribute.${e}.description`),defaultMessage:"A type for modeling data"}))))))};Ke.defaultProps={type:"text"},Ke.propTypes={type:n().string};var On=Ke,Pt=e=>{const t=e%2===1;return{paddingLeft:t?2:0,paddingRight:t?0:2}};const Bt=({attributes:e})=>a.createElement(l.KeyboardNavigable,{tagName:"button"},a.createElement(l.Flex,{direction:"column",alignItems:"stretch",gap:8},e.map((t,o)=>a.createElement(l.Grid,{key:o,gap:0},t.map((s,r)=>{const{paddingLeft:i,paddingRight:u}=Pt(r);return a.createElement(l.GridItem,{key:s,col:6,style:{height:"100%"}},a.createElement(l.Box,{paddingLeft:i,paddingRight:u,paddingBottom:1,style:{height:"100%"}},a.createElement(On,{type:s})))})))));Bt.propTypes={attributes:n().array.isRequired};var Dn=Bt,kn=g(33348),Pn=g.n(kn),ae=g(57269);const Bn=(0,Fe.default)(l.Box)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,$n=()=>a.createElement(l.Flex,{wrap:"wrap",gap:4},[...Array(4)].map((e,t)=>a.createElement(Bn,{key:`empty-card-${t}`,height:"138px",width:"375px",hasRadius:!0})));var Un=()=>{const{formatMessage:e}=(0,$.useIntl)();return a.createElement(l.Box,{position:"relative"},a.createElement($n,null),a.createElement(l.Box,{position:"absolute",top:6,width:"100%"},a.createElement(l.Flex,{alignItems:"center",justifyContent:"center",direction:"column"},a.createElement(l.Icon,{as:ae.EmptyStateDocument,color:"",width:"160px",height:"88px"}),a.createElement(l.Box,{paddingTop:6,paddingBottom:4},a.createElement(l.Box,{textAlign:"center"},a.createElement(l.Typography,{variant:"delta",as:"p",textColor:"neutral600"},e({id:(0,d.Z)("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})),a.createElement(l.Box,{paddingTop:4},a.createElement(l.Typography,{variant:"delta",as:"p",textColor:"neutral600"},e({id:(0,d.Z)("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."}))))),a.createElement(l.LinkButton,{to:`/marketplace?${Pn().stringify({categories:["Custom fields"]})}`,variant:"secondary",startIcon:a.createElement(ae.Plus,null)},e({id:(0,d.Z)("modalForm.empty.button"),defaultMessage:"Add custom fields"})))))};const $t=({customFieldUid:e,customField:t})=>{const{type:o,intlLabel:s,intlDescription:r}=t,{formatMessage:i}=(0,$.useIntl)(),{onClickSelectCustomField:u}=(0,Ce.Z)(),c=()=>{u({attributeType:o,customFieldUid:e})};return a.createElement(kt,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:c},a.createElement(l.Flex,null,a.createElement(ze.Z,{type:o,customField:e}),a.createElement(l.Box,{paddingLeft:4},a.createElement(l.Flex,null,a.createElement(l.Typography,{fontWeight:"bold"},i(s))),a.createElement(l.Flex,null,a.createElement(l.Typography,{variant:"pi",textColor:"neutral600"},i(r))))))};$t.propTypes={customFieldUid:n().string.isRequired,customField:n().shape({type:n().string.isRequired,icon:n().func,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired}).isRequired,intlDescription:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired}).isRequired}).isRequired};var wn=$t,jn=()=>{const{formatMessage:e}=(0,$.useIntl)(),t=(0,M.useCustomFields)(),o=Object.entries(t.getAll());if(!o.length)return a.createElement(Un,null);const s=o.sort((r,i)=>r[1].name>i[1].name?1:-1);return a.createElement(l.KeyboardNavigable,{tagName:"button"},a.createElement(l.Flex,{direction:"column",alignItems:"stretch",gap:3},a.createElement(l.Grid,{gap:0},s.map(([r,i],u)=>{const{paddingLeft:c,paddingRight:m}=Pt(u);return a.createElement(l.GridItem,{key:r,col:6,style:{height:"100%"}},a.createElement(l.Box,{paddingLeft:c,paddingRight:m,paddingBottom:1,style:{height:"100%"}},a.createElement(wn,{key:r,customFieldUid:r,customField:i})))})),a.createElement(l.Link,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0},e({id:(0,d.Z)("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"}))))};const Ut=({attributes:e,forTarget:t,kind:o})=>{const{formatMessage:s}=(0,$.useIntl)(),r=(0,d.Z)("modalForm.tabs.default"),i=(0,d.Z)("modalForm.tabs.custom"),u=t.includes("component")?"component":o,c=(0,d.Z)(`modalForm.sub-header.chooseAttribute.${u}`);return a.createElement(l.ModalBody,{padding:6},a.createElement(l.TabGroup,{label:s({id:(0,d.Z)("modalForm.tabs.label"),defaultMessage:"Default and Custom types tabs"}),id:"attribute-type-tabs",variant:"simple"},a.createElement(l.Flex,{justifyContent:"space-between"},a.createElement(l.Typography,{variant:"beta",as:"h2"},s({id:c,defaultMessage:"Select a field"})),a.createElement(l.Tabs,null,a.createElement(l.Tab,null,s({id:r,defaultMessage:"Default"})),a.createElement(l.Tab,null,s({id:i,defaultMessage:"Custom"})))),a.createElement(l.Box,{paddingBottom:6},a.createElement(l.Divider,null)),a.createElement(l.TabPanels,null,a.createElement(l.TabPanel,null,a.createElement(Dn,{attributes:e})),a.createElement(l.TabPanel,null,a.createElement(jn,null)))))};Ut.propTypes={attributes:n().array.isRequired,forTarget:n().string.isRequired,kind:n().string.isRequired};var Wn=Ut;const Ye=({description:e,disabled:t,intlLabel:o,isCreating:s,name:r,onChange:i,value:u})=>{const{formatMessage:c}=(0,$.useIntl)(),[m,f]=(0,a.useState)(!1),y=o.id?c({id:o.id,defaultMessage:o.defaultMessage},{...o.values}):r,p=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=()=>f(N=>!N),v=()=>{i({target:{name:r,value:!1}}),T()},F=({target:{checked:N}})=>{if(!N&&!s){T();return}i({target:{name:r,value:N}})};return a.createElement(a.Fragment,null,a.createElement(l.Checkbox,{checked:u,disabled:t,hint:p,name:r,onChange:F},y),a.createElement(M.ConfirmDialog,{isOpen:m,onToggleDialog:T,onConfirm:v,bodyText:{id:(0,d.Z)("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the draft & publish, your drafts will be deleted."},leftButtonText:{id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"},rightButtonText:{id:(0,d.Z)("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"}}))};Ye.defaultProps={description:null,disabled:!1,value:!1},Ye.propTypes={description:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}),disabled:n().bool,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,isCreating:n().bool.isRequired,name:n().string.isRequired,onChange:n().func.isRequired,value:n().bool};var zn=Ye;const Xe=({actionType:e,attributeName:t,attributeType:o,categoryName:s,contentTypeKind:r,dynamicZoneTarget:i,forTarget:u,modalType:c,targetUid:m,customFieldUid:f})=>{const{formatMessage:y}=(0,$.useIntl)(),{modifiedData:p}=(0,Ee.Z)();let T,v=[];const F=p?.[u]?.[m]||p?.[u]||null;let N=F?.schema.displayName;if(c==="contentType"&&(T=r),["component","editCategory"].includes(c)&&(T="component"),["component","contentType"].includes(c)){let C=(0,d.Z)(`modalForm.component.header-${e}`);return c==="contentType"&&(C=(0,d.Z)(`modalForm.${r}.header-create`)),e==="edit"&&(C=(0,d.Z)("modalForm.header-edit")),a.createElement(l.ModalHeader,null,a.createElement(l.Flex,null,a.createElement(l.Box,null,a.createElement(ze.Z,{type:T})),a.createElement(l.Box,{paddingLeft:3},a.createElement(l.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},y({id:C},{name:N})))))}v=[{label:N,info:{category:F?.category||null,name:F?.schema.displayName}}],c==="chooseAttribute"&&(T=["component","components"].includes(u)?"component":F.schema.kind),c==="addComponentToDynamicZone"&&(T="dynamiczone",v.push({label:i})),(c==="attribute"||c==="customField")&&(T=o,v.push({label:t})),c==="editCategory"&&(v=[{label:y({id:(0,d.Z)("modalForm.header.categories"),defaultMessage:"Categories"})},{label:s}]);const E=v.map(({label:C})=>C).join(",");return a.createElement(l.ModalHeader,null,a.createElement(l.Flex,{gap:3},a.createElement(ze.Z,{type:T,customField:f}),a.createElement(l.Breadcrumbs,{label:E},v.map((C,A)=>{const W=he()(C.label);if(!W)return null;const z=`${C.label}.${A}`;if(C.info?.category){const _=`${W} (${he()(C.info.category)} - ${he()(C.info.name)})`;return a.createElement(l.Crumb,{key:z},_)}return a.createElement(l.Crumb,{key:z},W)}))))};Xe.defaultProps={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,contentTypeKind:null,targetUid:null,customFieldUid:null},Xe.propTypes={actionType:n().string,attributeName:n().string,attributeType:n().string,categoryName:n().string,contentTypeKind:n().string,dynamicZoneTarget:n().string,forTarget:n().oneOf(["contentType","component","components"]),modalType:n().string.isRequired,targetUid:n().string,customFieldUid:n().string};var Vn=Xe;const Je=({categoryName:e,deleteCategory:t,deleteComponent:o,deleteContentType:s,isAttributeModal:r,isCustomFieldModal:i,isComponentAttribute:u,isComponentToDzModal:c,isContentTypeModal:m,isCreatingComponent:f,isCreatingComponentAttribute:y,isCreatingComponentInDz:p,isCreatingComponentWhileAddingAField:T,isCreatingContentType:v,isCreatingDz:F,isComponentModal:N,isDzAttribute:B,isEditingAttribute:E,isEditingCategory:C,isInFirstComponentStep:A,onSubmitAddComponentAttribute:W,onSubmitAddComponentToDz:z,onSubmitCreateContentType:_,onSubmitCreateComponent:L,onSubmitCreateDz:Y,onSubmitEditAttribute:se,onSubmitEditCategory:$e,onSubmitEditComponent:oe,onSubmitEditContentType:Ne,onSubmitEditCustomFieldAttribute:G,onSubmitEditDz:Le,onClickFinish:Q})=>{const{formatMessage:j}=(0,$.useIntl)();return c?p?a.createElement(l.Button,{variant:"secondary",type:"submit",onClick:R=>{R.preventDefault(),z(R,!0)},startIcon:a.createElement(ae.Plus,null)},j({id:(0,d.Z)("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})):a.createElement(l.Button,{variant:"default",type:"submit",onClick:R=>{R.preventDefault(),z(R,!1)}},j({id:"global.finish",defaultMessage:"Finish"})):r&&B&&!F?a.createElement(l.Button,{variant:"default",type:"submit",onClick:R=>{R.preventDefault(),Q(),Le(R,!1)}},j({id:"global.finish",defaultMessage:"Finish"})):r&&B&&F?a.createElement(a.Fragment,null,a.createElement(l.Button,{variant:"secondary",type:"submit",onClick:R=>{R.preventDefault(),Y(R,!0)},startIcon:a.createElement(ae.Plus,null)},j({id:(0,d.Z)("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"}))):r&&u?A?a.createElement(l.Button,{variant:"secondary",type:"submit",onClick:R=>{R.preventDefault(),W(R,!0)}},j(y?{id:(0,d.Z)("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:(0,d.Z)("form.button.select-component"),defaultMessage:"Configure the component"})):a.createElement(a.Fragment,null,a.createElement(l.Button,{variant:"secondary",type:"submit",onClick:R=>{R.preventDefault(),W(R,!0)},startIcon:a.createElement(ae.Plus,null)},j(T?{id:(0,d.Z)("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),a.createElement(l.Button,{variant:"default",type:"button",onClick:R=>{R.preventDefault(),Q(),W(R,!1)}},j({id:"global.finish",defaultMessage:"Finish"}))):r&&!u&&!B?a.createElement(a.Fragment,null,a.createElement(l.Button,{type:E?"button":"submit",variant:"secondary",onClick:R=>{R.preventDefault(),se(R,!0)},startIcon:a.createElement(ae.Plus,null)},j({id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),a.createElement(l.Button,{type:E?"submit":"button",variant:"default",onClick:R=>{R.preventDefault(),Q(),se(R,!1)}},j({id:"global.finish",defaultMessage:"Finish"}))):m?a.createElement(a.Fragment,null,!v&&a.createElement(a.Fragment,null,a.createElement(l.Button,{type:"button",variant:"danger",onClick:R=>{R.preventDefault(),s()}},j({id:"global.delete",defaultMessage:"Delete"})),a.createElement(l.Button,{type:"submit",variant:"default",onClick:R=>{R.preventDefault(),Ne(R,!1)}},j({id:"global.finish",defaultMessage:"Finish"}))),v&&a.createElement(l.Button,{type:"submit",variant:"secondary",onClick:R=>{R.preventDefault(),_(R,!0)}},j({id:"global.continue",defaultMessage:"Continue"}))):N?a.createElement(a.Fragment,null,!f&&a.createElement(a.Fragment,null,a.createElement(l.Button,{type:"button",variant:"danger",onClick:R=>{R.preventDefault(),o()}},j({id:"global.delete",defaultMessage:"Delete"})),a.createElement(l.Button,{type:"submit",variant:"default",onClick:R=>{R.preventDefault(),oe(R,!1)}},j({id:"global.finish",defaultMessage:"Finish"}))),f&&a.createElement(l.Button,{type:"submit",variant:"secondary",onClick:R=>{R.preventDefault(),L(R,!0)}},j({id:"global.continue",defaultMessage:"Continue"}))):C?a.createElement(a.Fragment,null,a.createElement(l.Button,{type:"button",variant:"danger",onClick:R=>{R.preventDefault(),t(e)}},j({id:"global.delete",defaultMessage:"Delete"})),a.createElement(l.Button,{type:"submit",variant:"default",onClick:R=>{R.preventDefault(),$e(R)}},j({id:"global.finish",defaultMessage:"finish"}))):i?a.createElement(a.Fragment,null,a.createElement(l.Button,{type:E?"button":"submit",variant:"secondary",onClick:R=>{R.preventDefault(),G(R,!0)},startIcon:a.createElement(ae.Plus,null)},j({id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),a.createElement(l.Button,{type:E?"submit":"button",variant:"default",onClick:R=>{R.preventDefault(),Q(),G(R,!1)}},j({id:"global.finish",defaultMessage:"Finish"}))):null};Je.defaultProps={categoryName:null,onClickFinish(){}},Je.propTypes={categoryName:n().string,deleteCategory:n().func.isRequired,deleteComponent:n().func.isRequired,deleteContentType:n().func.isRequired,isAttributeModal:n().bool.isRequired,isCustomFieldModal:n().bool.isRequired,isComponentAttribute:n().bool.isRequired,isComponentModal:n().bool.isRequired,isComponentToDzModal:n().bool.isRequired,isContentTypeModal:n().bool.isRequired,isCreatingComponent:n().bool.isRequired,isCreatingComponentAttribute:n().bool.isRequired,isCreatingComponentInDz:n().bool.isRequired,isCreatingComponentWhileAddingAField:n().bool.isRequired,isCreatingContentType:n().bool.isRequired,isCreatingDz:n().bool.isRequired,isDzAttribute:n().bool.isRequired,isEditingAttribute:n().bool.isRequired,isEditingCategory:n().bool.isRequired,isInFirstComponentStep:n().bool.isRequired,onSubmitAddComponentAttribute:n().func.isRequired,onSubmitAddComponentToDz:n().func.isRequired,onSubmitCreateContentType:n().func.isRequired,onSubmitCreateComponent:n().func.isRequired,onSubmitCreateDz:n().func.isRequired,onSubmitEditAttribute:n().func.isRequired,onSubmitEditCategory:n().func.isRequired,onSubmitEditComponent:n().func.isRequired,onSubmitEditContentType:n().func.isRequired,onSubmitEditCustomFieldAttribute:n().func.isRequired,onSubmitEditDz:n().func.isRequired,onClickFinish:n().func};var Gn=Je,Hn=({modalType:e,forTarget:t,kind:o,actionType:s,step:r})=>{switch(e){case"chooseAttribute":return(0,d.Z)(`modalForm.sub-header.chooseAttribute.${t.includes("component")?"component":o||"collectionType"}`);case"attribute":return(0,d.Z)(`modalForm.sub-header.attribute.${s}${r!=="null"&&r!==null&&s!=="edit"?".step":""}`);case"customField":return(0,d.Z)(`modalForm.sub-header.attribute.${s}`);case"addComponentToDynamicZone":return(0,d.Z)("modalForm.sub-header.addComponentToDynamicZone");default:return(0,d.Z)("configurations")}};const Qe=({actionType:e,modalType:t,forTarget:o,kind:s,step:r,attributeType:i,attributeName:u,customField:c})=>{const{formatMessage:m}=(0,$.useIntl)(),f=t==="customField"?c.intlLabel:{id:(0,d.Z)(`attribute.${i}`)};return a.createElement(l.Flex,{direction:"column",alignItems:"flex-start",paddingBottom:2,gap:1},a.createElement(l.Typography,{as:"h2",variant:"beta"},m({id:Hn({actionType:e,forTarget:o,kind:s,step:r,modalType:t}),defaultMessage:"Add new field"},{type:he()(m(f)),name:he()(u),step:r})),a.createElement(l.Typography,{variant:"pi",textColor:"neutral600"},m({id:(0,d.Z)(`attribute.${i}.description`),defaultMessage:"A type for modeling data"})))};Qe.defaultProps={actionType:null,modalType:null,forTarget:null,kind:null,step:null,attributeType:null,attributeName:null,customField:null},Qe.propTypes={actionType:n().string,modalType:n().string,forTarget:n().string,kind:n().string,step:n().string,attributeType:n().string,attributeName:n().string,customField:n().object};var Kn=Qe;const _e=({intlLabel:e,name:t,options:o,onChange:s,value:r})=>{const{formatMessage:i}=(0,$.useIntl)(),u=e.id?i({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):t,c=m=>{let f="";m==="true"&&(f=!0),m==="false"&&(f=!1),s({target:{name:t,value:f,type:"select-default-boolean"}})};return a.createElement(l.Select,{label:u,id:t,name:t,onChange:c,value:(r===null?"":r).toString()},o.map(({metadatas:{intlLabel:m,disabled:f,hidden:y},key:p,value:T})=>a.createElement(l.Option,{key:p,value:T,disabled:f,hidden:y},m.defaultMessage)))};_e.defaultProps={value:null},_e.propTypes={intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,name:n().string.isRequired,onChange:n().func.isRequired,options:n().arrayOf(n().shape({metadatas:n().shape({intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired}).isRequired,disabled:n().bool,hidden:n().bool}).isRequired,key:n().oneOfType([n().string,n().number]).isRequired,value:n().oneOfType([n().string,n().number]).isRequired}).isRequired).isRequired,value:n().any};var Yn=_e;const Xn=(0,Fe.default)(l.Flex)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    ${(0,l.inputFocusStyle)()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    ${l.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,et=({intlLabel:e,name:t,onChange:o,radios:s,value:r})=>{const{formatMessage:i}=(0,$.useIntl)();return a.createElement(l.Flex,{direction:"column",alignItems:"stretch",gap:2},a.createElement(l.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:t,as:"label"},i(e)),a.createElement(Xn,{gap:4,alignItems:"stretch"},s.map(u=>a.createElement("label",{htmlFor:u.value.toString(),key:u.value,className:"container"},a.createElement("input",{id:u.value.toString(),name:t,className:"option-input",checked:u.value===r,value:u.value,key:u.value,onChange:o,type:"radio"}),a.createElement(l.Box,{className:"option",padding:4},a.createElement(l.Flex,null,a.createElement(l.Box,{paddingRight:4},a.createElement("span",{className:"checkmark"})),a.createElement(l.Flex,{direction:"column",alignItems:"stretch",gap:2},a.createElement(l.Typography,{fontWeight:"bold"},i(u.title)),a.createElement(l.Typography,{variant:"pi",textColor:"neutral600"},i(u.description)))))))))};et.defaultProps={radios:[]},et.propTypes={intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,name:n().string.isRequired,onChange:n().func.isRequired,radios:n().arrayOf(n().shape({title:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired}),description:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired}),value:n().any.isRequired})),value:n().oneOfType([n().string,n().bool]).isRequired};var tt=et;const wt=({onChange:e,name:t,...o})=>{const s=r=>{const i=r.target.value!=="false";e({target:{name:t,value:i,type:"boolean-radio-group"}})};return a.createElement(tt,{...o,name:t,onChange:s})};wt.propTypes={name:n().string.isRequired,onChange:n().func.isRequired};var Jn=wt;const nt=({error:e,intlLabel:t,modifiedData:o,name:s,onChange:r,value:i})=>{const{formatMessage:u}=(0,$.useIntl)(),[c,m]=(0,a.useState)(!!i||i===0),f=t.id?u({id:t.id,defaultMessage:t.defaultMessage},{...t.values}):s,y=o.type==="biginteger"?"text":"number",p=!o.type,T=e?u({id:e,defaultMessage:e}):"";return a.createElement(l.Flex,{direction:"column",alignItems:"stretch",gap:2},a.createElement(l.Checkbox,{id:s,name:s,onValueChange:v=>{r({target:{name:s,value:v?y==="text"?"0":0:null}}),m(B=>!B)},value:c},f),c&&a.createElement(l.Box,{paddingLeft:6,style:{maxWidth:"200px"}},y==="text"?a.createElement(l.TextInput,{"aria-label":f,disabled:p,error:T,id:s,name:s,onChange:r,value:i===null?"":i}):a.createElement(l.NumberInput,{"aria-label":f,disabled:p,error:T,id:s,name:s,onValueChange:v=>{r({target:{name:s,value:v,type:y}})},value:i||0})))};nt.defaultProps={error:null,value:null},nt.propTypes={error:n().string,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,modifiedData:n().object.isRequired,name:n().string.isRequired,onChange:n().func.isRequired,value:n().oneOfType([n().string,n().object,n().bool,n().number])};var Qn=nt;const jt=({onChange:e,...t})=>{const o=(0,M.useNotification)(),s=r=>{o({type:"info",message:{id:(0,d.Z)("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."}}),e(r)};return a.createElement(tt,{...t,onChange:s})};jt.propTypes={onChange:n().func.isRequired};var _n=jt,at=g(49561),K=g(91559);const ot=({oneThatIsCreatingARelationWithAnother:e,target:t})=>{const{contentTypes:o,sortedContentTypesList:s}=(0,Ee.Z)(),r=(0,be.useDispatch)(),i=s.filter(Dt),u=O()(o,[t,"plugin"],null),c=O()(o,[t,"schema","displayName"],"error");return a.createElement(l.SimpleMenu,{id:"label",label:`${c}
    ${u?`(from: ${u})`:""}`},i.map(({uid:m,title:f,restrictRelationsTo:y,plugin:p})=>{const T=()=>{const v=p?`${p}_${f}`:f;r({type:K.aG,target:{value:m,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:v,targetContentTypeAllowedRelations:y}})};return a.createElement(l.MenuItem,{key:m,onClick:T},f,"\xA0",p&&a.createElement(a.Fragment,null,"(from: ",p,")"))}))};ot.defaultProps={target:null},ot.propTypes={oneThatIsCreatingARelationWithAnother:n().string.isRequired,target:n().string};var ea=ot;const rt=({disabled:e,error:t,header:o,isMain:s,name:r,onChange:i,oneThatIsCreatingARelationWithAnother:u,target:c,value:m})=>a.createElement(l.Box,{background:"neutral100",hasRadius:!0,borderColor:"neutral200"},a.createElement(l.Flex,{paddingTop:s?4:1,paddingBottom:s?3:1,justifyContent:"center"},s?a.createElement(l.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},o):a.createElement(ea,{target:c,oneThatIsCreatingARelationWithAnother:u})),a.createElement(l.Divider,{background:"neutral200"}),a.createElement(l.Box,{padding:4},a.createElement(M.GenericInput,{disabled:e,error:t?.id||null,intlLabel:{id:(0,d.Z)("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:r,onChange:i,type:"text",value:m})));rt.defaultProps={disabled:!1,error:null,header:null,isMain:!1,onChange(){},oneThatIsCreatingARelationWithAnother:null,target:null,value:""},rt.propTypes={disabled:n().bool,error:n().object,header:n().string,isMain:n().bool,name:n().string.isRequired,onChange:n().func,oneThatIsCreatingARelationWithAnother:n().string,target:n().string,value:n().string};var Wt=rt,ta=g(51382),zt=g.n(ta),na=g(24443),st=g.n(na);const aa=(0,Fe.default)(l.Box)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,oa=(0,Fe.default)(l.Box)`
  background: ${({theme:e,isSelected:t})=>e.colors[t?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,isSelected:t})=>e.colors[t?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  svg {
    width: 1.5rem;
    height: 100%;
    path {
      fill: ${({theme:e,isSelected:t})=>e.colors[t?"primary700":"neutral500"]};
    }
  }
  &:disabled {
    cursor: not-allowed;
  }
`,ra=(0,Fe.default)(l.Flex)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,sa={oneWay:ae.OneWay,oneToOne:ae.OneToOne,oneToMany:ae.OneToMany,manyToOne:ae.ManyToOne,manyToMany:ae.ManyToMany,manyWay:ae.ManyWays},it=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:t,relationType:o,target:s})=>{const r=(0,be.useDispatch)(),{formatMessage:i}=(0,$.useIntl)(),{contentTypes:u,modifiedData:c}=(0,Ee.Z)(),m=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],f=["oneWay","manyWay"],p=(e==="contentType"?O()(c,[e,"schema","kind"],""):e)==="collectionType"?m:f,T=o==="manyToOne",v=O()(u,[s,"schema","displayName"],"unknown"),F=T?v:t,N=T?t:v,B=st()(F,o==="manyToMany"?2:1),E=O()(u,[s,"schema","restrictRelationsTo"],null),C=st()(N,["manyToMany","oneToMany","manyToOne","manyWay"].includes(o)?2:1);return o?a.createElement(l.Flex,{style:{flex:1}},a.createElement(aa,null,a.createElement(l.Flex,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center"},a.createElement(l.KeyboardNavigable,{tagName:"button"},a.createElement(l.Flex,{gap:3},p.map(A=>{const W=sa[A],z=E===null||E.includes(A);return a.createElement(oa,{as:"button",isSelected:o===A,disabled:!z,key:A,onClick:()=>{z&&r({type:K.QQ,target:{oneThatIsCreatingARelationWithAnother:t,targetContentType:s,value:A}})},padding:2,type:"button"},a.createElement(W,{key:A}))}))))),a.createElement(ra,{justifyContent:"center"},a.createElement(l.Typography,null,zt()(B,{length:24}),"\xA0"),a.createElement(l.Typography,{textColor:"primary600"},i({id:(0,d.Z)(`relation.${o}`)}),"\xA0"),a.createElement(l.Typography,null,zt()(C,{length:24})))):null};it.defaultProps={relationType:null,target:null},it.propTypes={naturePickerType:n().string.isRequired,oneThatIsCreatingARelationWithAnother:n().string.isRequired,relationType:n().string,target:n().string};var ia=it;const Vt=({formErrors:e,mainBoxHeader:t,modifiedData:o,naturePickerType:s,onChange:r})=>{const i=(0,at.Z)(o.relation,o.targetAttribute);return a.createElement(l.Flex,{style:{position:"relative"}},a.createElement(Wt,{isMain:!0,header:t,error:e?.name||null,name:"name",onChange:r,value:o?.name||""}),a.createElement(ia,{naturePickerType:s,oneThatIsCreatingARelationWithAnother:t,relationType:i,target:o.target}),a.createElement(Wt,{disabled:["oneWay","manyWay"].includes(i),error:e?.targetAttribute||null,name:"targetAttribute",onChange:r,oneThatIsCreatingARelationWithAnother:t,target:o.target,value:o?.targetAttribute||""}))};Vt.propTypes={formErrors:n().object.isRequired,mainBoxHeader:n().string.isRequired,modifiedData:n().object.isRequired,naturePickerType:n().string.isRequired,onChange:n().func.isRequired};var la=Vt,Gt=g(45251);const lt=({description:e,error:t,intlLabel:o,modifiedData:s,name:r,onChange:i,value:u})=>{const{formatMessage:c}=(0,$.useIntl)(),m=(0,a.useRef)(i),f=s?.displayName||"";(0,a.useEffect)(()=>{if(f){const v=(0,Gt.Z)(f);try{const F=st()(v,2);m.current({target:{name:r,value:F}})}catch{m.current({target:{name:r,value:v}})}}else m.current({target:{name:r,value:""}})},[f,r]);const y=t?c({id:t,defaultMessage:t}):"",p=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=c(o);return a.createElement(l.TextInput,{error:y,label:T,id:r,hint:p,name:r,onChange:i,value:u||""})};lt.defaultProps={description:null,error:null,value:null},lt.propTypes={description:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}),error:n().string,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,modifiedData:n().object.isRequired,name:n().string.isRequired,onChange:n().func.isRequired,value:n().string};var ua=lt;const ut=({error:e,intlLabel:t,name:o,onChange:s,value:r})=>{const{formatMessage:i}=(0,$.useIntl)(),{allComponentsCategories:u}=(0,Ee.Z)(),[c,m]=(0,a.useState)(u),f=e?i({id:e,defaultMessage:e}):"",y=i(t),p=v=>{s({target:{name:o,value:v,type:"select-category"}})},T=v=>{m(F=>[...F,v]),p(v)};return a.createElement(l.CreatableCombobox,{error:f,id:o,label:y,name:o,onChange:p,onCreateOption:T,value:r},c.map(v=>a.createElement(l.ComboboxOption,{key:v,value:v},v)))};ut.defaultProps={error:null,value:null},ut.propTypes={error:n().string,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,name:n().string.isRequired,onChange:n().func.isRequired,value:n().string};var da=ut;const dt=({error:e,intlLabel:t,isAddingAComponentToAnotherComponent:o,isCreating:s,isCreatingComponentWhileAddingAField:r,componentToCreate:i,name:u,onChange:c,targetUid:m,forTarget:f,value:y})=>{const{formatMessage:p}=(0,$.useIntl)(),T=e?p({id:e,defaultMessage:e}):"",v=p(t),{componentsGroupedByCategory:F,componentsThatHaveOtherComponentInTheirAttributes:N}=(0,Ee.Z)(),B=["component","components"].includes(f);let E=Object.entries(F).reduce((C,A)=>{const[W,z]=A,_=z.map(L=>({uid:L.uid,label:L.schema.displayName,categoryName:W}));return[...C,..._]},[]);return o&&(E=E.filter(C=>!N.includes(C.uid))),B&&(E=E.filter(C=>C.uid!==m)),r&&(E=[{uid:y,label:i.displayName,categoryName:i.category}]),a.createElement(l.Select,{disabled:r||!s,error:T,label:v,id:u,name:u,onChange:C=>{c({target:{name:u,value:C,type:"select-category"}})},value:y||""},E.map(C=>a.createElement(l.Option,{key:C.uid,value:C.uid},`${C.categoryName} - ${C.label}`)))};dt.defaultProps={componentToCreate:null,error:null},dt.propTypes={componentToCreate:n().object,forTarget:n().string.isRequired,error:n().string,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,isAddingAComponentToAnotherComponent:n().bool.isRequired,isCreating:n().bool.isRequired,isCreatingComponentWhileAddingAField:n().bool.isRequired,name:n().string.isRequired,onChange:n().func.isRequired,targetUid:n().string.isRequired,value:n().string.isRequired};var ca=dt,ct=(e,t)=>e.find(({name:o})=>o===t);const Ht=({dynamicZoneTarget:e,intlLabel:t,name:o,onChange:s,value:r})=>{const{formatMessage:i}=(0,$.useIntl)(),{componentsGroupedByCategory:u,modifiedData:c}=(0,Ee.Z)(),f=(ct(c.contentType.schema.attributes,e)||{}).components||[],y=Object.keys(u).reduce((v,F)=>{const N=u[F].filter(({uid:B})=>!f.includes(B));return N.length>0&&(v[F]=N),v},{}),p=Object.entries(y).reduce((v,F)=>{const[N,B]=F,E={label:N,children:B.map(({uid:C,schema:{displayName:A}})=>({label:A,value:C}))};return v.push(E),v},[]),T=i({id:(0,d.Z)("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:r.length});return a.createElement(l.MultiSelectNested,{id:"select1",label:i(t),customizeContent:()=>T,name:o,onChange:v=>{s({target:{name:o,value:v,type:"select-components"}})},options:p,value:r||[]})};Ht.propTypes={intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,dynamicZoneTarget:n().string.isRequired,name:n().string.isRequired,onChange:n().func.isRequired,value:n().array.isRequired};var ma=Ht;const mt=({intlLabel:e,error:t,modifiedData:o,name:s,onChange:r,options:i,value:u})=>{const{formatMessage:c}=(0,$.useIntl)(),m=c(e),f=t?c({id:t,defaultMessage:t}):"",y=p=>{r({target:{name:s,value:p,type:"select"}}),u&&o.default!==void 0&&o.default!==null&&r({target:{name:"default",value:null}})};return a.createElement(l.Select,{error:f,label:m,id:s,name:s,onChange:y,value:u||""},i.map(({metadatas:{intlLabel:p,disabled:T,hidden:v},key:F,value:N})=>a.createElement(l.Option,{key:F,value:N,disabled:T,hidden:v},c({id:p.id,defaultMessage:p.defaultMessage},p.values))))};mt.defaultProps={error:void 0,value:""},mt.propTypes={error:n().string,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,modifiedData:n().object.isRequired,name:n().string.isRequired,onChange:n().func.isRequired,options:n().arrayOf(n().shape({metadatas:n().shape({intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired}).isRequired,disabled:n().bool,hidden:n().bool}).isRequired,key:n().oneOfType([n().string,n().number]).isRequired,value:n().oneOfType([n().string,n().number]).isRequired}).isRequired).isRequired,value:n().string};var pa=mt;const pt=({intlLabel:e,error:t,modifiedData:o,name:s,onChange:r,options:i,value:u})=>{const{formatMessage:c}=(0,$.useIntl)(),m=c(e),f=t?c({id:t,defaultMessage:t}):"",y=p=>{r({target:{name:s,value:p,type:"select"}}),u&&(p==="biginteger"&&u!=="biginteger"&&(o.default!==void 0&&o.default!==null&&r({target:{name:"default",value:null}}),o.max!==void 0&&o.max!==null&&r({target:{name:"max",value:null}}),o.min!==void 0&&o.min!==null&&r({target:{name:"min",value:null}})),["decimal","float","integer"].includes(p)&&u==="biginteger"&&(o.default!==void 0&&o.default!==null&&r({target:{name:"default",value:null}}),o.max!==void 0&&o.max!==null&&r({target:{name:"max",value:null}}),o.min!==void 0&&o.min!==null&&r({target:{name:"min",value:null}})))};return a.createElement(l.Select,{error:f,label:m,id:s,name:s,onChange:y,value:u||""},i.map(({metadatas:{intlLabel:p,disabled:T,hidden:v},key:F,value:N})=>a.createElement(l.Option,{key:F,value:N,disabled:T,hidden:v},c(p))))};pt.defaultProps={error:void 0,value:""},pt.propTypes={error:n().string,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,modifiedData:n().object.isRequired,name:n().string.isRequired,onChange:n().func.isRequired,options:n().arrayOf(n().shape({metadatas:n().shape({intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired}).isRequired,disabled:n().bool,hidden:n().bool}).isRequired,key:n().oneOfType([n().string,n().number]).isRequired,value:n().oneOfType([n().string,n().number]).isRequired}).isRequired).isRequired,value:n().string};var ga=pt;const gt=({description:e,error:t,intlLabel:o,modifiedData:s,name:r,onChange:i,value:u})=>{const{formatMessage:c}=(0,$.useIntl)(),m=(0,a.useRef)(i),f=s?.displayName||"";(0,a.useEffect)(()=>{f?m.current({target:{name:r,value:(0,Gt.Z)(f)}}):m.current({target:{name:r,value:""}})},[f,r]);const y=t?c({id:t,defaultMessage:t}):"",p=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=c(o);return a.createElement(l.TextInput,{error:y,label:T,id:r,hint:p,name:r,onChange:i,value:u||""})};gt.defaultProps={description:null,error:null,value:null},gt.propTypes={description:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}),error:n().string,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,modifiedData:n().object.isRequired,name:n().string.isRequired,onChange:n().func.isRequired,value:n().string};var fa=gt;const Kt=({form:e,formErrors:t,genericInputProps:o,modifiedData:s,onChange:r})=>{const{formatMessage:i}=(0,$.useIntl)();return e.map((u,c)=>u.items.length===0?null:a.createElement(l.Box,{key:c},u.sectionTitle&&a.createElement(l.Box,{paddingBottom:4},a.createElement(l.Typography,{variant:"delta",as:"h3"},i(u.sectionTitle))),a.createElement(l.Grid,{gap:4},u.items.map((m,f)=>{const y=`${c}.${f}`,p=O()(s,m.name,""),T=Object.keys(t).find(F=>F===m.name),v=T?t[T].id:O()(t,[...m.name.split(".").filter(F=>F!=="componentToCreate"),"id"],null);return m.type==="pushRight"?a.createElement(l.GridItem,{col:m.size||6,key:m.name||y},a.createElement("div",null)):a.createElement(l.GridItem,{col:m.size||6,key:m.name||y},a.createElement(M.GenericInput,{...m,...o,error:v,onChange:r,value:p}))}))))};Kt.propTypes={form:n().arrayOf(n().object).isRequired,formErrors:n().object.isRequired,genericInputProps:n().object.isRequired,modifiedData:n().object.isRequired,onChange:n().func.isRequired};var Yt=Kt;const ft=({description:e,disabled:t,error:o,intlLabel:s,labelAction:r,name:i,onChange:u,placeholder:c,value:m})=>{const{formatMessage:f}=(0,$.useIntl)(),y=o?f({id:o,defaultMessage:o}):"",p=e?f({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=f(s),v=c?f({id:c.id,defaultMessage:c.defaultMessage},{...c.values}):"",F=Array.isArray(m)?m.join(`
`):"",N=B=>{const E=B.target.value.split(`
`);u({target:{name:i,value:E}})};return a.createElement(l.Textarea,{disabled:t,error:y,label:T,labelAction:r,id:i,hint:p,name:i,onChange:N,placeholder:v,value:F},F)};ft.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,value:""},ft.propTypes={description:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}),disabled:n().bool,error:n().string,intlLabel:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}).isRequired,labelAction:n().element,name:n().string.isRequired,onChange:n().func.isRequired,placeholder:n().shape({id:n().string.isRequired,defaultMessage:n().string.isRequired,values:n().object}),value:n().oneOfType([n().array,n().string])};var ya=ft,ba=(e,t)=>{const o=O()(e,["contentType","schema","kind"],"");return o==="singleType"||o===t.kind?!0:O()(e,["contentType","schema","attributes"],[]).filter(({relation:i,type:u,targetAttribute:c})=>{const m=(0,at.Z)(i,c);return u==="relation"&&!["oneWay","manyWay"].includes(m)}).length===0},ha=(e="",t,o)=>{const s=["text","email","richtext","password","number","enumeration","date","media","boolean","json","relation"],r=e==="contentType",i=o.includes(t),u=!r&&!i;return r?[[...s,"uid"],["component","dynamiczone"]]:u?[s,["component"]]:[s]},Xt=e=>e.reduce((t,o)=>{const s=o.items.reduce((r,i)=>(i.name&&r.push(i.name),r),[]);return[...t,...s]},[]),h=g(5173),Se=g(2158),Ta={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:(0,d.Z)("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}},Jt=/^[A-Za-z][-_0-9A-Za-z]*$/,va=e=>{const t={name:h.Z_().matches(Jt,M.translatedErrors.regex).test({name:"nameNotAllowed",message:M.translatedErrors.unique,test(o){return o?!e.includes((0,q.toLower)(o)):!1}}).required(M.translatedErrors.required)};return h.Ry(t)},Ca=(e,t,o)=>{const s={displayName:h.Z_().test({name:"nameAlreadyUsed",message:M.translatedErrors.unique,test(r){if(!r)return!1;const i=(0,Se.N)(r,o);return!e.includes(i)}}).test({name:"nameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(r){return r?!t.includes((0,q.toLower)((0,q.trim)(r))):!1}}).required(M.translatedErrors.required),category:h.Z_().matches(Jt,M.translatedErrors.regex).required(M.translatedErrors.required),icon:h.Z_()};return h.Ry(s)},yt={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:(0,d.Z)("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:(0,d.Z)("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:(0,d.Z)("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]},qe={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:(0,d.Z)("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:(0,d.Z)("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]}]},advanced(){return[]}},x={default:{name:"default",type:"text",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:(0,d.Z)("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:(0,d.Z)("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:(0,d.Z)("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:(0,d.Z)("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:(0,d.Z)("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}},Ma={boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},component({repeatable:e},t){return t==="1"?{sections:qe.advanced("componentToCreate")}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private,x.max,x.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[{...x.default,type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.unique,x.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.max,x.min]}]}},email(){return{sections:[{sectionTitle:null,items:[{...x.default,type:"email"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.unique,x.maxLength,x.minLength,x.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((t,o)=>e.enum.indexOf(t)===o&&t).map(t=>({key:t,value:t,metadatas:{intlLabel:{id:`${t}.no-override`,defaultMessage:t}}}))]},{intlLabel:{id:(0,d.Z)("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:(0,d.Z)("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:(0,d.Z)("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},number(e){const t=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:t,intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.unique,x.max,x.min,x.private]}]}},password(){return{sections:[{sectionTitle:null,items:[x.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.maxLength,x.minLength,x.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[x.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.maxLength,x.minLength,x.private]}]}},text(){return{sections:[{sectionTitle:null,items:[x.default,x.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.unique,x.maxLength,x.minLength,x.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[{...x.default,disabled:Boolean(e.targetField),type:"text"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.maxLength,x.minLength,x.private]}]}}};const ge={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:(0,d.Z)("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}};var Ea={component(e,t){if(t==="1"){const o=e.createComponent===!0?qe.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[yt]},...o]}}return{sections:[{sectionTitle:null,items:[ge,{name:"component",type:"select-component",intlLabel:{id:(0,d.Z)("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:(0,d.Z)("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:(0,d.Z)("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:(0,d.Z)("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[ge,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[ge]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:(0,d.Z)("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:(0,d.Z)("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[ge]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:(0,d.Z)("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:(0,d.Z)("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:(0,d.Z)("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[ge,{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[ge]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:(0,d.Z)("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:(0,d.Z)("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:(0,d.Z)("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[ge]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:(0,d.Z)("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:(0,d.Z)("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:(0,d.Z)("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,t,o){const s=o.filter(({type:r})=>["string","text"].includes(r)).map(({name:r})=>({key:r,value:r,metadatas:{intlLabel:{id:`${r}.no-override`,defaultMessage:r}}}));return{sections:[{sectionTitle:null,items:[{...ge,placeholder:{id:(0,d.Z)("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. Slug, SEO URL, Canonical URL"}},{intlLabel:{id:(0,d.Z)("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...s]}]}]}}},Qt={advanced:Ma,base:Ea},Ra={sections:[{sectionTitle:null,items:[ge]}]},xa=g(91815),Aa=g.n(xa),Za=g(40791),Fa=g.n(Za),bt=e=>Fa()(e,{decamelize:!1,lowercase:!1,separator:"_"});const _t=/^[A-Za-z][_0-9A-Za-z]*$/,en=e=>({name:"attributeNameAlreadyUsed",message:M.translatedErrors.unique,test(t){return t?!e.includes(t):!1}}),or=(e,t,o)=>{const s=get(e,["schema","attributes"],{});return Object.keys(s).filter(r=>t?r!==o:!0)},ht=e=>({name:"forbiddenAttributeName",message:(0,d.Z)("error.attributeName.reserved-name"),test(t){return t?!e.includes(t):!1}}),b={default:()=>h.Z_().nullable(),max:()=>h.Rx().integer().nullable(),min:()=>h.Rx().integer().when("max",(e,t)=>e?t.max(e,(0,d.Z)("error.validation.minSupMax")):t).nullable(),maxLength:()=>h.Rx().integer().positive((0,d.Z)("error.validation.positive")).nullable(),minLength:()=>h.Rx().integer().min(0).when("maxLength",(e,t)=>e?t.max(e,(0,d.Z)("error.validation.minSupMax")):t).nullable(),name(e,t){return h.Z_().test(en(e)).test(ht(t)).matches(_t,M.translatedErrors.regex).required(M.translatedErrors.required)},required:()=>h.O7(),type:()=>h.Z_().required(M.translatedErrors.required),unique:()=>h.O7().nullable()},Tt=(e,t)=>({name:b.name(e,t),type:b.type(),default:b.default(),unique:b.unique(),required:b.required(),maxLength:b.maxLength(),minLength:b.minLength(),regex:h.Z_().test({name:"isValidRegExpPattern",message:(0,d.Z)("error.validation.regex"),test(s){return new RegExp(s)!==null}}).nullable()}),vt={name:"isMinSuperiorThanMax",message:(0,d.Z)("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:t}=this.parent;return!t||Number.isNaN((0,q.toNumber)(e))?!0:(0,q.toNumber)(t)>=(0,q.toNumber)(e)}};var Ct={date(e,t){const o={name:b.name(e,t),type:b.type()};return h.Ry(o)},datetime(e,t){const o={name:b.name(e,t),type:b.type()};return h.Ry(o)},time(e,t){const o={name:b.name(e,t),type:b.type()};return h.Ry(o)},default(e,t){const o={name:b.name(e,t),type:b.type()};return h.Ry(o)},biginteger(e,t){const o={name:b.name(e,t),type:b.type(),default:h.Z_().nullable().matches(/^-?\d*$/),unique:b.unique(),required:b.required(),max:h.Z_().nullable().matches(/^-?\d*$/,M.translatedErrors.regex),min:h.Z_().nullable().test(vt).matches(/^-?\d*$/,M.translatedErrors.regex)};return h.Ry(o)},boolean(e,t){const o={name:b.name(e,t),default:h.O7().nullable(),required:b.required(),unique:b.unique()};return h.Ry(o)},component(e,t){const o={name:b.name(e,t),type:b.type(),required:b.required(),max:b.max(),min:b.min(),component:h.Z_().required(M.translatedErrors.required)};return h.Ry(o)},decimal(e,t){const o={name:b.name(e,t),type:b.type(),default:h.Rx(),required:b.required(),max:h.Rx(),min:h.Rx().test(vt)};return h.Ry(o)},dynamiczone(e,t){const o={name:b.name(e,t),type:b.type(),required:b.required(),max:b.max(),min:b.min()};return h.Ry(o)},email(e,t){const o={name:b.name(e,t),type:b.type(),default:h.Z_().email().nullable(),unique:b.unique(),required:b.required(),maxLength:b.maxLength(),minLength:b.minLength()};return h.Ry(o)},enumeration(e,t){const o=/^[_A-Za-z][_0-9A-Za-z]*$/,s={name:h.Z_().test(en(e)).test(ht(t)).matches(o,M.translatedErrors.regex).required(M.translatedErrors.required),type:b.type(),default:b.default(),unique:b.unique(),required:b.required(),enum:h.IX().of(h.Z_()).min(1,M.translatedErrors.min).test({name:"areEnumValuesUnique",message:(0,d.Z)("error.validation.enum-duplicate"),test(r){return!Aa()(r.map(bt).filter((u,c,m)=>m.indexOf(u)!==c)).length}}).test({name:"doesNotHaveEmptyValues",message:(0,d.Z)("error.validation.enum-empty-string"),test:r=>!r.map(bt).some(i=>i==="")}).test({name:"doesMatchRegex",message:(0,d.Z)("error.validation.enum-regex"),test:r=>r.map(bt).every(i=>o.test(i))}),enumName:h.Z_().nullable()};return h.Ry(s)},float(e,t){const o={name:b.name(e,t),type:b.type(),required:b.required(),default:h.Rx(),max:h.Rx(),min:h.Rx().test(vt)};return h.Ry(o)},integer(e,t){const o={name:b.name(e,t),type:b.type(),default:h.Rx().integer(),unique:b.unique(),required:b.required(),max:b.max(),min:b.min()};return h.Ry(o)},json(e,t){const o={name:b.name(e,t),type:b.type(),required:b.required(),unique:b.unique()};return h.Ry(o)},media(e,t){const o={name:b.name(e,t),type:b.type(),multiple:h.O7(),required:b.required(),allowedTypes:h.IX().of(h.Z_().oneOf(["images","videos","files","audios"])).min(1).nullable()};return h.Ry(o)},password(e,t){const o={name:b.name(e,t),type:b.type(),default:b.default(),unique:b.unique(),required:b.required(),maxLength:b.maxLength(),minLength:b.minLength()};return h.Ry(o)},relation(e,t,o,{initialData:s,modifiedData:r}){const i={name:b.name(e,t),target:h.Z_().required(M.translatedErrors.required),relation:h.Z_().required(),type:h.Z_().required(),targetAttribute:h.Vo(()=>{const u=(0,at.Z)(r.relation,r.targetAttribute);if(u==="oneWay"||u==="manyWay")return h.Z_().nullable();let c=h.Z_().test(ht(t)),f=[...o.map(({name:y})=>y),r.name].filter(y=>y!==s.targetAttribute);return c.matches(_t,M.translatedErrors.regex).test({name:"forbiddenTargetAttributeName",message:(0,d.Z)("error.validation.relation.targetAttribute-taken"),test(y){return y?!f.includes(y):!1}}).required(M.translatedErrors.required)})};return h.Ry(i)},richtext(e,t){const o={name:b.name(e,t),type:b.type(),default:b.default(),unique:b.unique(),required:b.required(),maxLength:b.maxLength(),minLength:b.minLength()};return h.Ry(o)},string(e,t){const o=Tt(e,t);return h.Ry(o)},text(e,t){const o=Tt(e,t);return h.Ry(o)},uid(e,t){const o=Tt(e,t);return h.Ry(o)}};const tn={name:"displayName",type:"text",intlLabel:{id:(0,d.Z)("contentType.displayName.label"),defaultMessage:"Display name"}};var Mt={advanced:{default(){return{sections:[{items:[{intlLabel:{id:(0,d.Z)("contentType.draftAndPublish.label"),defaultMessage:"Draft & publish"},description:{id:(0,d.Z)("contentType.draftAndPublish.description"),defaultMessage:"Allows writing a draft version of an entry, before it is published"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[tn,{description:{id:(0,d.Z)("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:(0,d.Z)("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:(0,d.Z)("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:(0,d.Z)("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[tn,{disabled:!0,description:{id:(0,d.Z)("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:(0,d.Z)("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:(0,d.Z)("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:(0,d.Z)("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:(0,d.Z)("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:(0,d.Z)("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:(0,d.Z)("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},Sa=({usedContentTypeNames:e=[],reservedModels:t=[],singularNames:o=[],pluralNames:s=[]})=>{const r={displayName:h.Z_().test({name:"nameAlreadyUsed",message:M.translatedErrors.unique,test(i){if(!i)return!1;const u=(0,Se.E)(i);return!e.includes(u)}}).test({name:"nameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!t.includes((0,q.toLower)((0,q.trim)(i))):!1}}).required(M.translatedErrors.required),pluralName:h.Z_().test({name:"pluralNameAlreadyUsed",message:M.translatedErrors.unique,test(i){return i?!s.includes(i):!1}}).test({name:"pluralAndSingularAreUnique",message:(0,d.Z)("error.contentType.pluralName-used"),test(i,u){return i?u.parent.singularName!==i:!1}}).test({name:"pluralNameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!t.includes((0,q.toLower)((0,q.trim)(i))):!1}}).required(M.translatedErrors.required),singularName:h.Z_().test({name:"singularNameAlreadyUsed",message:M.translatedErrors.unique,test(i){return i?!o.includes(i):!1}}).test({name:"pluralAndSingularAreUnique",message:(0,d.Z)("error.contentType.singularName-used"),test(i,u){return i?u.parent.pluralName!==i:!1}}).test({name:"singularNameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!t.includes((0,q.toLower)((0,q.trim)(i))):!1}}).required(M.translatedErrors.required),draftAndPublish:h.O7(),kind:h.Z_().oneOf(["singleType","collectionType"])};return h.Ry(r)},Et={advanced:{default(){return{sections:qe.advanced("componentToCreate.")}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[yt]},...qe.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[yt]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:(0,d.Z)("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},nn=(e,t)=>{e.forEach(o=>{if(!("sectionTitle"in o)){t[0].items.push(o);return}t.push(o)})},an=(e,t)=>e.filter(({name:o})=>o!==t.initialData.name).map(({name:o})=>o),Re={customField:{schema({schemaAttributes:e,attributeType:t,customFieldValidator:o,reservedNames:s,schemaData:r,ctbFormsAPI:i}){const u=an(e,r),c=Ct[t](u,s.attributes);return i.makeCustomFieldValidator(c,o,u,s.attributes,r)},form:{base({customField:e}){const t=[{sectionTitle:null,items:[ge]}];return e.options?.base&&nn(e.options.base,t),{sections:t}},advanced({customField:e,data:t,step:o,extensions:s,...r}){const i=[{sectionTitle:null,items:[]}],u=s.getAdvancedForm(["attribute",e.type],{data:t,type:e.type,step:o,...r});if(e.options?.advanced&&nn(e.options.advanced,i),u){const c={sectionTitle:{id:(0,d.Z)("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:u};i.push(c)}return{sections:i}}}},attribute:{schema(e,t,o,s,r,i){const u=O()(e,["schema","attributes"],[]),c=an(u,r);try{let m=Ct[t](c,o.attributes,s,r);return i.makeValidator(["attribute",t],m,c,o.attributes,s,r)}catch(m){return console.error("Error yup build schema",m),Ct.default(c,o.attributes)}},form:{advanced({data:e,type:t,step:o,extensions:s,...r}){try{const i=Qt.advanced[t](e,o).sections,u=s.getAdvancedForm(["attribute",t],{data:e,type:t,step:o,...r});return{sections:i.reduce((m,f)=>(f.sectionTitle===null?m.push(f):m.push({...f,items:[...f.items,...u]}),m),[])}}catch(i){return console.error(i),{sections:[]}}},base({data:e,type:t,step:o,attributes:s}){try{return Qt.base[t](e,o,s)}catch{return Ra}}}},contentType:{schema(e,t,o,s,r,i){const u=Object.values(i).map(T=>T.schema.singularName),c=Object.values(i).map(T=>O()(T,["schema","pluralName"],"")),m=t?e.filter(T=>T!==o):e,f=t?u.filter(T=>O()(i,[o,"schema","singularName"],"")!==T):u,y=t?c.filter(T=>O()(i,[o,"schema","pluralName"],"")!==T):c,p=Sa({usedContentTypeNames:m,reservedModels:s.models,singularNames:f,pluralNames:y});return r.makeValidator(["contentType"],p,m,s.models,f,y)},form:{base({actionType:e}){return e==="create"?Mt.base.create():Mt.base.edit()},advanced({extensions:e}){const t=Mt.advanced.default().sections.map(s=>s.items).flat(),o=e.getAdvancedForm(["contentType"]);return{sections:[{items:[...t,...o]}]}}}},component:{schema(e,t,o,s=!1,r=null){const i=s?e.filter(u=>u!==r):e;return Ca(i,o.models,t)},form:{advanced(){return{sections:qe.advanced()}},base(){return{sections:qe.base()}}}},addComponentToDynamicZone:{form:{advanced(){return Et.advanced.default()},base({data:e}){return O()(e,"createComponent",!1)?Et.base.createComponent():Et.base.default()}}},editCategory:{schema(e,t){const o=e.filter(s=>s!==t.name).map(s=>Pe()(s));return va(o)},form:{advanced:()=>({sections:[]}),base(){return Ta.base}}}},on=g(98178),qa=g(25061);const Na=()=>e=>e[`${V.Z}_formModal`]||qa.E;var La=()=>(0,on.P1)(Na(),e=>e),Ia=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:t,onNavigateToAddCompoToDZModal:o,onNavigateToCreateComponentStep2:s,actionType:r,attributeName:i,attributeType:u,customFieldUid:c,categoryName:m,dynamicZoneTarget:f,forTarget:y,modalType:p,isOpen:T,kind:v,step:F,targetUid:N}=(0,Ce.Z)(),B=(0,M.useCustomFields)().get(c),E=(0,a.useRef)(),C=(0,a.useMemo)(La,[]),A=(0,be.useDispatch)(),W=(0,M.useNotification)(),z=(0,be.useSelector)(k=>C(k),be.shallowEqual),{push:_}=(0,w.useHistory)(),{trackUsage:L}=(0,M.useTracking)(),{formatMessage:Y}=(0,$.useIntl)(),{getPlugin:se}=(0,M.useStrapiApp)(),oe=se(V.Z).apis.forms,Ne=oe.components.inputs,{addAttribute:G,addCustomFieldAttribute:Le,addCreatedComponentToDynamicZone:Q,allComponentsCategories:j,changeDynamicZoneComponents:R,contentTypes:Ie,components:Ue,createSchema:Oe,deleteCategory:xt,deleteData:Ge,editCategory:At,editCustomFieldAttribute:Zt,submitData:Ft,modifiedData:ee,nestedComponents:St,setModifiedData:qt,sortedContentTypesList:Nt,updateSchema:Lt,reservedNames:Te}=(0,Ee.Z)(),{componentToCreate:we,formErrors:ve,initialData:re,isCreatingComponentWhileAddingAField:xe,modifiedData:I}=z,Z=y==="contentType"||y==="component"?[y]:[y,N];(0,a.useEffect)(()=>{if(T){const k=Nt.filter(Dt);p==="editCategory"&&qt(),r==="edit"&&p==="attribute"&&y==="contentType"&&L("willEditFieldOfContentType");const ue=[...Z,"schema","attributes"],me=ct(O()(ee,ue,[]),f)||null;if(p==="editCategory"&&r==="edit"&&A({type:K._H,modalType:p,actionType:r,data:{name:m}}),p==="contentType"&&r==="create"&&A({type:K._H,modalType:p,actionType:r,data:{draftAndPublish:!0},pluginOptions:{}}),p==="contentType"&&r==="edit"){const{displayName:U,draftAndPublish:X,kind:pe,pluginOptions:te,pluralName:Oo,singularName:Do}=O()(ee,[...Z,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});A({type:K._H,actionType:r,modalType:p,data:{displayName:U,draftAndPublish:X,kind:pe,pluginOptions:te,pluralName:Oo,singularName:Do}})}if(p==="component"&&r==="edit"){const U=O()(ee,Z,{});A({type:K._H,actionType:r,modalType:p,data:{displayName:U.schema.displayName,category:U.category}})}if(p==="addComponentToDynamicZone"&&r==="edit"){const U={...me,components:[],name:f,createComponent:!1,componentToCreate:{type:"component"}};A({type:K.VZ,attributeToEdit:U})}if(u){const X={...ct(O()(ee,ue,[]),i),name:i};u==="component"&&r==="edit"&&(X.repeatable||Sn()(X,"repeatable",!1)),A(p==="customField"?{type:K.OY,customField:B,isEditing:r==="edit",modifiedDataToSetForEditing:X,forTarget:y}:{type:K.S0,attributeType:u,nameToSetForRelation:O()(k,["0","title"],"error"),targetUid:O()(k,["0","uid"],"error"),isEditing:r==="edit",modifiedDataToSetForEditing:X,step:F,forTarget:y})}}else A({type:K.c2})},[r,i,u,m,f,y,T,p]);const S=p==="contentType",D=p==="component",H=p==="attribute",ie=p==="customField",le=u==="component"&&H,de=r==="create",fe=O()(I,"createComponent",!1)||xe,De=F==="1",hn=p==="editCategory",Tn=p==="chooseAttribute",It=(0,Se.E)(I.displayName||""),Ot=O()(ee,[...Z,"schema","attributes"],null),vo=async()=>{let k;const ue=fe&&F==="1"?O()(I,"componentToCreate",{}):I;if(S)k=Re.contentType.schema(Object.keys(Ie),r==="edit",O()(ee,[...Z,"uid"],null),Te,oe,Ie);else if(D)k=Re.component.schema(Object.keys(Ue),I.category||"",Te,r==="edit",O()(ee,[...Z,"uid"],null),oe);else if(ie)k=Re.customField.schema({schemaAttributes:O()(ee,[...Z,"schema","attributes"],[]),attributeType:B.type,reservedNames:Te,schemaData:{modifiedData:I,initialData:re},ctbFormsAPI:oe,customFieldValidator:B.options?.validator});else if(le&&fe&&De)k=Re.component.schema(Object.keys(Ue),O()(I,"componentToCreate.category",""),Te,oe);else if(H&&!De){const me=u==="relation"?"relation":I.type;let U=[];if(me==="relation"){const X=O()(I,["target"],null);U=O()(Ie,[X,"schema","attributes"],[]).filter(({name:te})=>r!=="edit"?!0:te!==re.targetAttribute)}k=Re.attribute.schema(O()(ee,Z,{}),me,Te,U,{modifiedData:I,initialData:re},oe)}else if(hn)k=Re.editCategory.schema(j,re,oe);else if(De&&fe)k=Re.component.schema(Object.keys(Ue),O()(I,"componentToCreate.category",""),Te,oe);else return;await k.validate(ue,{abortEarly:!1})},vn=(0,a.useCallback)(({target:{name:k,value:ue,type:me,...U}})=>{const X=["enumName","max","min","maxLength","minLength","regex","default"];let pe;X.includes(k)&&ue===""?pe=null:pe=ue;const te=Object.assign({},ve);k==="max"&&delete te.min,k==="maxLength"&&delete te.minLength,delete te[k],A({type:K.Ey,errors:te}),A({type:K.P0,keys:k.split("."),value:pe,...U})},[A,ve]),ce=async(k,ue=de)=>{k.preventDefault();try{await vo(),Eo(ue);const me=y==="components"?N:It;if(S)if(de)Oe({...I,kind:v},p,It),_({pathname:`/plugins/${V.Z}/content-types/${It}`}),t({forTarget:y,targetUid:me});else{ba(ee,I)?(e(),Ft(I)):W({type:"warning",message:{id:"notification.contentType.relations.conflict"}});return}else if(p==="component")if(de){const U=(0,Se.N)(I.displayName,I.category),{category:X,...pe}=I;Oe(pe,"component",U,X),_({pathname:`/plugins/${V.Z}/component-categories/${X}/${U}`}),t({forTarget:y,targetUid:U})}else{Lt(I,p,N),e();return}else if(hn){if(Pe()(re.name)===Pe()(I.name)){e();return}At(re.name,I);return}else if(ie){const U={attributeToSet:{...I,customField:c},forTarget:y,targetUid:N,initialAttribute:re};r==="edit"?Zt(U):Le(U),ue?t({forTarget:y,targetUid:me}):e();return}else if(H&&!fe){if(u==="dynamiczone"){G(I,y,N,r==="edit",re),de?(A({type:K.I}),E.current._handlers.setSelectedTabIndex(0),o({dynamicZoneTarget:I.name})):e();return}if(!le){G(I,y,N,r==="edit",re),ue?t({forTarget:y,targetUid:me}):e();return}if(De){s(),A({type:K.yC,forTarget:y});return}G(I,y,N,r==="edit",re,!0),ue?t({forTarget:y,targetUid:N}):e()}else if(H&&fe){if(De){L("willCreateComponentFromAttributesModal"),A({type:K.oF,forTarget:y}),s();return}const{category:U,type:X,...pe}=we,te=(0,Se.N)(we.displayName,U);Oe(pe,X,te,U,fe),G(I,y,N,!1),A({type:K.c2}),ue?t({forTarget:"components",targetUid:te}):e();return}else{if(De)if(fe){const{category:U,type:X,...pe}=I.componentToCreate,te=(0,Se.N)(I.componentToCreate.displayName,U);Oe(pe,X,te,U,fe),Q(f,[te]),t({forTarget:"components",targetUid:te})}else R(f,I.components),e();else console.error("This case is not handled");return}A({type:K.c2})}catch(me){const U=(0,M.getYupInnerErrors)(me);console.log({err:me,errors:U}),A({type:K.Ey,errors:U})}},Co=()=>{window.confirm(Y({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&(e(),A({type:K.c2}))},Cn=()=>{(0,q.isEqual)(I,re)?(e(),A({type:K.c2})):Co()},Mo=k=>{if(k==="advanced"){if(S){L("didSelectContentTypeSettings");return}y==="contentType"&&L("didSelectContentTypeFieldSettings")}},Eo=k=>{p==="attribute"&&y==="contentType"&&u!=="dynamiczone"&&k&&L("willAddMoreFieldToContentType")},Ro=()=>!!(p==="editCategory"||p==="component"||Zn()(I,"createComponent")),xo=ha(y,N,St);if(!T||!p)return null;const Mn=O()(Re,[p,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),Ao=y==="components"||y==="component",En={customInputs:{"allowed-types-select":In,"boolean-radio-group":Jn,"checkbox-with-number-field":Qn,"content-type-radio-group":_n,"radio-group":tt,relation:la,"select-category":da,"select-component":ca,"select-components":ma,"select-default-boolean":Yn,"select-number":ga,"select-date":pa,"toggle-draft-publish":zn,"text-plural":ua,"text-singular":fa,"textarea-enum":ya,...Ne},componentToCreate:we,dynamicZoneTarget:f,formErrors:ve,isAddingAComponentToAnotherComponent:Ao,isCreatingComponentWhileAddingAField:xe,mainBoxHeader:O()(ee,[...Z,"schema","displayName"],""),modifiedData:I,naturePickerType:y,isCreating:de,targetUid:N,forTarget:y},Rn=Mn.advanced({data:I,type:u,step:F,actionType:r,attributes:Ot,extensions:oe,forTarget:y,contentTypeSchema:ee.contentType||{},customField:B}).sections,xn=Mn.base({data:I,type:u,step:F,actionType:r,attributes:Ot,extensions:oe,forTarget:y,contentTypeSchema:ee.contentType||{},customField:B}).sections,Zo=Xt(xn),Fo=Xt(Rn),So=Object.keys(ve).some(k=>Zo.includes(k)),qo=Object.keys(ve).some(k=>Fo.includes(k)),No=O()(Ie,[N,"schema","kind"]),Lo=()=>r==="edit"&&Ot.every(({name:k})=>k!==I?.name),Io=()=>{Lo()&&L("didEditFieldNameOnContentType")};return a.createElement(l.ModalLayout,{onClose:Cn,labelledBy:"title"},a.createElement(Vn,{actionType:r,attributeName:i,categoryName:m,contentTypeKind:v,dynamicZoneTarget:f,modalType:p,forTarget:y,targetUid:N,attributeType:u,customFieldUid:c}),Tn&&a.createElement(Wn,{attributes:xo,forTarget:y,kind:No||"collectionType"}),!Tn&&a.createElement("form",{onSubmit:ce},a.createElement(l.ModalBody,null,a.createElement(l.TabGroup,{label:"todo",id:"tabs",variant:"simple",ref:E,onTabChange:k=>{k===1&&Mo("advanced")}},a.createElement(l.Flex,{justifyContent:"space-between"},a.createElement(Kn,{actionType:r,forTarget:y,kind:v,step:F,modalType:p,attributeType:u,attributeName:i,customField:B}),a.createElement(l.Tabs,null,a.createElement(l.Tab,{hasError:So},Y({id:(0,d.Z)("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})),a.createElement(l.Tab,{hasError:qo,disabled:Ro()},Y({id:(0,d.Z)("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})))),a.createElement(l.Divider,null),a.createElement(l.Box,{paddingTop:6},a.createElement(l.TabPanels,null,a.createElement(l.TabPanel,null,a.createElement(l.Flex,{direction:"column",alignItems:"stretch",gap:6},a.createElement(Yt,{form:xn,formErrors:ve,genericInputProps:En,modifiedData:I,onChange:vn}))),a.createElement(l.TabPanel,null,a.createElement(l.Flex,{direction:"column",alignItems:"stretch",gap:6},a.createElement(Yt,{form:Rn,formErrors:ve,genericInputProps:En,modifiedData:I,onChange:vn}))))))),a.createElement(l.ModalFooter,{endActions:a.createElement(Gn,{deleteCategory:xt,deleteContentType:Ge,deleteComponent:Ge,categoryName:re.name,isAttributeModal:p==="attribute",isCustomFieldModal:p==="customField",isComponentToDzModal:p==="addComponentToDynamicZone",isComponentAttribute:u==="component",isComponentModal:p==="component",isContentTypeModal:p==="contentType",isCreatingComponent:r==="create",isCreatingDz:r==="create",isCreatingComponentAttribute:I.createComponent||!1,isCreatingComponentInDz:I.createComponent||!1,isCreatingComponentWhileAddingAField:xe,isCreatingContentType:r==="create",isEditingAttribute:r==="edit",isDzAttribute:u==="dynamiczone",isEditingCategory:p==="editCategory",isInFirstComponentStep:F==="1",onSubmitAddComponentAttribute:ce,onSubmitAddComponentToDz:ce,onSubmitCreateComponent:ce,onSubmitCreateContentType:ce,onSubmitCreateDz:ce,onSubmitEditAttribute:ce,onSubmitEditCategory:ce,onSubmitEditComponent:ce,onSubmitEditContentType:ce,onSubmitEditCustomFieldAttribute:ce,onSubmitEditDz:ce,onClickFinish:Io}),startActions:a.createElement(l.Button,{variant:"tertiary",onClick:Cn},Y({id:"app.components.Button.cancel",defaultMessage:"Cancel"}))})))},rn=e=>e.reduce((t,o)=>(t[o.uid]=o,t),{}),Oa=(e,t,o,s)=>{const r=t.reduce((c,m)=>{const f=O()(o,m,{});return c[m]=f,c},{});return{[s?"contentType":"component"]:e,components:r}},Da=(e,t)=>{const o=Object.keys(e).map(s=>(0,q.get)(e,[s,...t],""));return(0,Me.Z)(o)},ka=g(13339);const Pa=e=>{const t=Object.keys(e).reduce((o,s)=>{const r=(0,q.get)(e,[s,"schema","attributes"],[]),i=Ba(r);return[...o,...i]},[]);return(0,Me.Z)(t)},Ba=e=>e.reduce((t,o)=>{const{type:s,component:r}=o;return s==="component"&&t.push(r),t},[]);var sn=Pa;const $a=e=>{const t=Object.keys(e).reduce((o,s)=>{const r=O()(e,[s],{}),i=r.uid;return Ua(r)&&o.push(i),o},[]);return(0,Me.Z)(t)},Ua=e=>O()(e,["schema","attributes"],[]).some(o=>{const{type:s}=o;return s==="component"}),wa=(e,t)=>{const o=Object.keys(e).filter(s=>{const r=(0,q.get)(e,s,{}),i=(0,q.get)(t,s,{}),u=(0,q.get)(r,["isTemporary"],!1),c=!(0,q.isEqual)(r,i);return u||c});return(0,Me.Z)(o)},ja=(e,t)=>{const o=un((0,q.get)(e,"schema.attributes",[]),t),s=(0,q.get)(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},s,{category:e.category},(0,q.omit)(e.schema,"attributes"),{attributes:o})},ln=(e,t=!1)=>{const o=(0,q.get)(e,"uid",null),s=un((0,q.get)(e,"schema.attributes",[]),o),r=t?{category:(0,q.get)(e,"category","")}:{},i=Object.assign(r,(0,q.omit)(e.schema,"attributes"),{attributes:s});return delete i.uid,delete i.isTemporary,delete i.visible,delete i.restrictRelationsTo,i},un=(e,t)=>e.reduce((o,{name:s,...r})=>{const i=r,u=i.target===t,c=i.type==="relation",m=(0,q.get)(i,"targetAttribute",null);if(!u)if(c){const f=Object.assign({},i,{targetAttribute:dn(m)});o[s]=Ve(f)}else o[s]=Ve(i);if(u){const f=i.target,y=Object.assign({},i,{target:f,targetAttribute:dn(m)});o[s]=Ve(y)}if(i.customField){const f={...i,type:"customField"};o[s]=Ve(f)}return o},{}),dn=e=>e==="-"?null:e,Ve=e=>Object.keys(e).reduce((t,o)=>(e[o]!==null&&o!=="plugin"&&(t[o]=e[o]),t),{}),Wa=(e,t,o,s=!1)=>wa(e,t).map(u=>{const c=(0,q.get)(e,u,{});return ja(c,o,s)}),za=e=>(0,q.sortBy)(Object.keys(e).map(t=>({visible:e[t].schema.visible,name:t,title:e[t].schema.displayName,plugin:e[t].plugin||null,uid:t,to:`/plugins/${V.Z}/content-types/${t}`,kind:e[t].schema.kind,restrictRelationsTo:e[t].schema.restrictRelationsTo})).filter(t=>t!==null),t=>(0,q.camelCase)(t.title)),cn="did-not-kill-server",Va="server is down";function Be(e,t){return new Promise(o=>{fetch(`${strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":!1}}).then(s=>{if(s.status>=400)throw new Error(Va);if(!t)throw new Error(cn);o(e)}).catch(s=>{setTimeout(()=>Be(e,s.message!==cn).then(o),100)})})}var Ga=e=>Object.values(e.attributes).filter(({type:o})=>o==="dynamiczone").every(({components:o})=>Array.isArray(o)&&o.length>0),J=g(31947),Ha=g(54370);const Ka=()=>e=>e[`${V.Z}_dataManagerProvider`]||Ha.E;var Ya=()=>(0,on.P1)(Ka(),e=>e);const Xa=e=>Object.keys(e).reduce((t,o)=>{const s=e[o].schema;return t[o]={...e[o],schema:{...s,attributes:Ja(s.attributes)}},t},{}),Ja=e=>Object.keys(e).reduce((t,o)=>(t.push({...e[o],name:o}),t),[]);var mn=Xa;const Rt=({children:e,components:t,contentTypes:o,isLoading:s,isLoadingForDataToBeSet:r,initialData:i,modifiedData:u,reservedNames:c})=>{const m=(0,be.useDispatch)(),f=(0,M.useNotification)(),{lockAppWithAutoreload:y,unlockAppWithAutoreload:p}=(0,M.useAutoReloadOverlayBlocker)(),{setCurrentStep:T}=(0,M.useGuidedTour)(),{getPlugin:v}=(0,M.useStrapiApp)(),{apis:F}=v(V.Z),{autoReload:N}=(0,M.useAppInfos)(),{formatMessage:B}=(0,$.useIntl)(),{trackUsage:E}=(0,M.useTracking)(),{refetchPermissions:C}=(0,M.useRBACProvider)(),{pathname:A}=(0,w.useLocation)(),{onCloseModal:W}=(0,Ce.Z)(),z=(0,w.useRouteMatch)(`/plugins/${V.Z}/content-types/:uid`),_=(0,w.useRouteMatch)(`/plugins/${V.Z}/component-categories/:categoryUid/:componentUid`),L=(0,M.useFetchClient)(),{put:Y,post:se,del:$e}=L,oe=(0,a.useRef)();oe.current=B;const Ne=N,G=z!==null,Le=G?"contentType":"component",Q=G?(0,q.get)(z,"params.uid",null):(0,q.get)(_,"params.componentUid",null),j=(0,a.useRef)(),R=G?"content-types":"components";j.current=async()=>{try{const[{data:{data:Z}},{data:{data:S}},{data:D}]=await Promise.all(["components","content-types","reserved-names"].map(fe=>L.get(`/${V.Z}/${fe}`))),H=rn(Z),ie=mn(H),le=rn(S),de=mn(le);m({type:J.Id,components:ie,contentTypes:de,reservedNames:D})}catch(Z){console.error({err:Z}),f({type:"warning",message:{id:"notification.error"}})}},(0,a.useEffect)(()=>(j.current(),()=>{m({type:J.Zl})}),[]),(0,a.useEffect)(()=>{!s&&Q&&Te()},[s,A,Q]),(0,a.useEffect)(()=>{N||f({type:"info",message:{id:(0,d.Z)("notification.info.autoreaload-disable")}})},[N,f]);const Ie=(Z,S,D,H=!1,ie,le=!1)=>{const de=H?J.JO:J.gz;m({type:de,attributeToSet:Z,forTarget:S,targetUid:D,initialAttribute:ie,shouldAddComponentToData:le})},Ue=({attributeToSet:Z,forTarget:S,targetUid:D,initialAttribute:H})=>{m({type:J.Ir,attributeToSet:Z,forTarget:S,targetUid:D,initialAttribute:H})},Oe=({attributeToSet:Z,forTarget:S,targetUid:D,initialAttribute:H})=>{m({type:J.Ly,attributeToSet:Z,forTarget:S,targetUid:D,initialAttribute:H})},xt=(Z,S)=>{m({type:J.Uu,dynamicZoneTarget:Z,componentsToAdd:S})},Ge=(Z,S,D,H,ie=!1)=>{const le=S==="contentType"?J.Sh:J.VR;m({type:le,data:Z,componentCategory:H,schemaType:S,uid:D,shouldAddComponentToData:ie})},At=(Z,S)=>{m({type:J.o_,dynamicZoneTarget:Z,newComponents:S})},Zt=(Z,S,D="")=>{const H=Z==="components"?J.lw:J.ai;Z==="contentType"&&E("willDeleteFieldOfContentType"),m({type:H,mainDataKey:Z,attributeToRemoveName:S,componentUid:D})},Ft=async Z=>{try{const S=`/${V.Z}/component-categories/${Z}`,D=window.confirm(B({id:(0,d.Z)("popUpWarning.bodyMessage.category.delete")}));W(),D&&(y(),await $e(S),await Be(!0),await p(),await xe())}catch(S){console.error({err:S}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}},ee=async()=>{try{const Z=`/${V.Z}/${R}/${Q}`,S=(0,q.get)(u,[Le,"isTemporary"],!1),D=window.confirm(B({id:(0,d.Z)(`popUpWarning.bodyMessage.${G?"contentType":"component"}.delete`)}));if(W(),D){if(S){m({type:J.Ap});return}y(),await $e(Z),await Be(!0),await p(),await xe()}}catch(Z){console.error({err:Z}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}},St=async(Z,S)=>{try{const D=`/${V.Z}/component-categories/${Z}`;W(),y(),await Y(D,S),await Be(!0),await p(),await xe()}catch(D){console.error({err:D}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}},qt=()=>{const Z=Object.assign({},t,u.components);if(!G){const D=(0,q.get)(u,"component",{});(0,q.set)(Z,(0,q.get)(D,["uid"],""),D)}const S=$a(Z);return(0,Me.Z)(S)},Nt=()=>{const Z=sn(t),S=sn(u.components||{});return(0,Me.Z)([...S,...Z])},Lt=(Z,S)=>{m({type:J.NG,dzName:Z,componentToRemoveIndex:S})},Te=()=>{const Z=G?o:t,S=(0,q.get)(Z,Q,{schema:{attributes:[]}}),D=(0,ka.Z)(S.schema.attributes,t),H=Oa(S,D,t,G),ie=(0,q.get)(S,"isTemporary",!1)&&(0,q.size)((0,q.get)(S,"schema.attributes",[]))===0;m({type:J.xx,schemaToSet:H,hasJustCreatedSchema:ie})},we=(0,a.useMemo)(()=>{const Z=G?o:t;return Q==="create-content-type"?!1:!Object.keys(Z).includes(Q)&&!s},[t,o,Q,G,s]),ve=(0,a.useMemo)(()=>{const Z=Object.keys(o).filter(S=>(0,q.get)(o,[S,"schema","visible"],!0)).sort();return(0,q.get)(Z,"0","create-content-type")},[o]);if(we)return a.createElement(w.Redirect,{to:`/plugins/${V.Z}/content-types/${ve}`});const re=async Z=>{try{const S=(0,q.get)(u,[Le,"isTemporary"],!1),D={components:Wa(u.components,t,Q,S)};if(G){const le=F.forms.mutateContentTypeSchema({...ln(u.contentType),...Z},i.contentType);if(!Ga(le)){f({type:"warning",message:{id:(0,d.Z)("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"}});return}D.contentType=le,E("willSaveContentType")}else D.component=ln(u.component,!0),E("willSaveComponent");y();const H=`/${V.Z}/${R}`,ie=S?H:`${H}/${Q}`;if(S?await se(ie,D):await Y(ie,D),await Be(!0),await p(),S&&(i.contentType?.schema.kind==="collectionType"||i.contentType?.schema.kind==="singleType")&&T("contentTypeBuilder.success"),G){E("didSaveContentType");const le=(0,q.get)(D,["contentType","schema","name"],""),de=(0,q.get)(i,["contentType","schema","name"],"");!S&&le!==de&&E("didEditNameOfContentType")}else E("didSaveComponent");await xe()}catch(S){G||E("didNotSaveComponent"),console.error({err:S.response}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}},xe=async()=>{await C()},I=(Z,S,D)=>{m({type:J.bi,data:Z,schemaType:S,uid:D})};return a.createElement(je.Z.Provider,{value:{addAttribute:Ie,addCustomFieldAttribute:Ue,addCreatedComponentToDynamicZone:xt,allComponentsCategories:Da(t,["category"]),changeDynamicZoneComponents:At,components:t,componentsGroupedByCategory:(0,q.groupBy)(t,"category"),componentsThatHaveOtherComponentInTheirAttributes:qt(),contentTypes:o,createSchema:Ge,deleteCategory:Ft,deleteData:ee,editCategory:St,editCustomFieldAttribute:Oe,isInDevelopmentMode:Ne,initialData:i,isInContentTypeView:G,modifiedData:u,nestedComponents:Nt(),removeAttribute:Zt,removeComponentFromDynamicZone:Lt,reservedNames:c,setModifiedData:Te,sortedContentTypesList:za(o),submitData:re,updateSchema:I}},r?a.createElement(M.LoadingIndicatorPage,null):a.createElement(a.Fragment,null,e,Ne&&a.createElement(Ia,null)))};Rt.defaultProps={components:{}},Rt.propTypes={children:n().node.isRequired,components:n().object,contentTypes:n().object.isRequired,isLoading:n().bool.isRequired,isLoadingForDataToBeSet:n().bool.isRequired,initialData:n().object.isRequired,modifiedData:n().object.isRequired,reservedNames:n().object.isRequired};const Qa=Ya(),_a=(0,be.connect)(Qa,null);var eo=(0,ke.compose)(_a)((0,a.memo)(Rt)),to=g(51216);const pn={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,kind:null,step:null,targetUid:null,customFieldUid:null},gn=({children:e})=>{const[t,o]=(0,a.useState)(pn),{trackUsage:s}=(0,M.useTracking)(),r=({attributeType:E,customFieldUid:C})=>{o(A=>({...A,actionType:"create",modalType:"customField",attributeType:E,customFieldUid:C}))},i=({attributeType:E,step:C})=>{t.forTarget==="contentType"&&s("didSelectContentTypeFieldType",{type:E}),o(A=>({...A,actionType:"create",modalType:"attribute",step:C,attributeType:E}))},u=({dynamicZoneTarget:E,targetUid:C})=>{o(A=>({...A,dynamicZoneTarget:E,targetUid:C,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},c=({forTarget:E,targetUid:C})=>{o(A=>({...A,actionType:"create",forTarget:E,targetUid:C,modalType:"chooseAttribute",isOpen:!0}))},m=E=>{o(C=>({...C,...E,isOpen:!0}))},f=E=>{o(C=>({...C,categoryName:E,actionType:"edit",modalType:"editCategory",isOpen:!0}))},y=({forTarget:E,targetUid:C,attributeName:A,attributeType:W,customFieldUid:z})=>{o(_=>({..._,modalType:"customField",customFieldUid:z,actionType:"edit",forTarget:E,targetUid:C,attributeName:A,attributeType:W,isOpen:!0}))},p=({forTarget:E,targetUid:C,attributeName:A,attributeType:W,step:z})=>{o(_=>({..._,modalType:"attribute",actionType:"edit",forTarget:E,targetUid:C,attributeName:A,attributeType:W,step:z,isOpen:!0}))},T=({modalType:E,forTarget:C,targetUid:A,kind:W})=>{o(z=>({...z,modalType:E,actionType:"edit",forTarget:C,targetUid:A,kind:W,isOpen:!0}))},v=()=>{o(pn)},F=({forTarget:E,targetUid:C})=>{o(A=>({...A,forTarget:E,targetUid:C,modalType:"chooseAttribute"}))},N=()=>{o(E=>({...E,attributeType:"component",modalType:"attribute",step:"2"}))},B=({dynamicZoneTarget:E})=>{o(C=>({...C,dynamicZoneTarget:E,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null}))};return a.createElement(to.Z.Provider,{value:{...t,onClickSelectField:i,onClickSelectCustomField:r,onCloseModal:v,onNavigateToChooseAttributeModal:F,onNavigateToAddCompoToDZModal:B,onOpenModalAddComponentsToDZ:u,onNavigateToCreateComponentStep2:N,onOpenModalAddField:c,onOpenModalCreateSchema:m,onOpenModalEditCategory:f,onOpenModalEditField:p,onOpenModalEditCustomField:y,onOpenModalEditSchema:T,setFormModalNavigationState:o}},e)};gn.propTypes={children:n().node.isRequired};var no=gn;const ao=(0,a.lazy)(()=>g.e(5905).then(g.bind(g,84015)));var oo=()=>{const{url:e}=(0,w.useRouteMatch)(),{categoryUid:t}=(0,w.useParams)();return a.createElement(a.Suspense,{fallback:a.createElement(M.LoadingIndicatorPage,null)},a.createElement(w.Switch,null,a.createElement(w.Route,{path:`${e}/:componentUid`},a.createElement(ao,{categoryId:t}))))},ro=g(61590),so=g(43110),io=g(77013),lo=g(79318),uo=g(28832),fn=g(66618),co=g(86834),mo=g.n(co),po=g(98978),yn=g.n(po),go=g(89793),fo=g.n(go),yo=g(58469),bo=()=>{const{components:e,componentsGroupedByCategory:t,contentTypes:o,isInDevelopmentMode:s,sortedContentTypesList:r,modifiedData:i,initialData:u}=(0,Ee.Z)(),c=(0,M.useNotification)(),{trackUsage:m}=(0,M.useTracking)(),[f,y]=(0,a.useState)(""),{onOpenModalCreateSchema:p,onOpenModalEditCategory:T}=(0,Ce.Z)(),v=yn()(Object.keys(t).map(L=>({name:L,title:L,isEditable:s,onClickEdit(Y,se){Y.stopPropagation(),F?T(se.name):C()},links:yn()(t[L].map(Y=>({name:Y.uid,to:`/plugins/${V.Z}/component-categories/${L}/${Y.uid}`,title:Y.schema.displayName})),Y=>Y.title)})),L=>L.title),F=!Object.keys(o).some(L=>o[L].isTemporary===!0)&&!Object.keys(e).some(L=>e[L].isTemporary===!0)&&fo()(i,u),N=()=>{F?(m("willCreateContentType"),p({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):C()},B=()=>{F?(m("willCreateSingleType"),p({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):C()},E=()=>{F?(m("willCreateComponent"),p({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):C()},C=()=>{c({type:"info",message:{id:`${(0,d.Z)("notification.info.creating.notSaved")}`,defaultMessage:"Please save your work before creating a new collection type or component"}})},A=r.filter(L=>L.visible),W=[{name:"models",title:{id:`${(0,d.Z)("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:s&&{id:`${(0,d.Z)("button.model.create")}`,defaultMessage:"Create new collection type",onClick:N},links:A.filter(L=>L.kind==="collectionType")},{name:"singleTypes",title:{id:`${(0,d.Z)("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:s&&{id:`${(0,d.Z)("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:B},links:A.filter(L=>L.kind==="singleType")},{name:"components",title:{id:`${(0,d.Z)("menu.section.components.name")}`,defaultMessage:"Components"},customLink:s&&{id:`${(0,d.Z)("button.component.create")}`,defaultMessage:"Create a new component",onClick:E},links:v}],z=L=>f?(0,yo.ZP)(L,Pe()(f),{keys:[Y=>Pe()(Y.title)]}):L;return{menu:(()=>W.map(L=>L.links.some(se=>!mo()(se.links))?{...L,links:L.links.map(se=>({...se,links:z(se.links)}))}:{...L,links:z(L.links)}))(),searchValue:f,onSearchChange:y}},ho=()=>{const{menu:e,searchValue:t,onSearchChange:o}=bo(),{formatMessage:s}=(0,$.useIntl)();return a.createElement(ro.m,{ariaLabel:s({id:`${(0,d.Z)("plugin.name")}`,defaultMessage:"Content-Types Builder"})},a.createElement(so.p,{searchable:!0,value:t,onClear:()=>o(""),onChange:r=>o(r.target.value),label:s({id:`${(0,d.Z)("plugin.name")}`,defaultMessage:"Content-Types Builder"}),searchLabel:s({id:"global.search",defaultMessage:"Search"})}),a.createElement(io.Z,null,e.map(r=>a.createElement(a.Fragment,{key:r.name},a.createElement(lo.D,{label:s({id:r.title.id,defaultMessage:r.title.defaultMessage}),collapsable:!0,badgeLabel:r.links.length.toString()},r.links.map(i=>i.links?a.createElement(uo.z,{key:i.name,label:he()(i.title)},i.links.map(u=>a.createElement(fn.E,{as:w.NavLink,to:u.to,active:u.active,key:u.name,isSubSectionChild:!0},he()(s({id:u.name,defaultMessage:u.title}))))):a.createElement(fn.E,{as:w.NavLink,to:i.to,active:i.active,key:i.name},he()(s({id:i.name,defaultMessage:i.title}))))),r.customLink&&a.createElement(l.Box,{paddingLeft:7},a.createElement(l.TextButton,{onClick:r.customLink.onClick,startIcon:a.createElement(l.Icon,{as:ae.Plus,width:(0,M.pxToRem)(8),height:(0,M.pxToRem)(8)}),marginTop:2},s({id:r.customLink.id,defaultMessage:r.customLink.defaultMessage})))))))};const bn=(0,a.lazy)(()=>g.e(5905).then(g.bind(g,84015)));var To=()=>{const{formatMessage:e}=(0,$.useIntl)(),t=e({id:`${V.Z}.plugin.name`,defaultMessage:"Content Types Builder"}),{startSection:o}=(0,M.useGuidedTour)(),s=(0,a.useRef)(o);return(0,a.useEffect)(()=>{s.current&&s.current("contentTypeBuilder")},[]),a.createElement(M.CheckPagePermissions,{permissions:P.Z.main},a.createElement(ye.Helmet,{title:t}),a.createElement(no,null,a.createElement(eo,null,a.createElement(l.Layout,{sideNav:a.createElement(ho,null)},a.createElement(a.Suspense,{fallback:a.createElement(M.LoadingIndicatorPage,null)},a.createElement(w.Switch,null,a.createElement(w.Route,{path:`/plugins/${V.Z}/content-types/create-content-type`,component:bn}),a.createElement(w.Route,{path:`/plugins/${V.Z}/content-types/:uid`,component:bn}),a.createElement(w.Route,{path:`/plugins/${V.Z}/component-categories/:categoryUid`,component:oo})))))))}},92318:function(Ae,ne,g){var a=g(25158);const w=ye=>`${a.Z}.${ye}`;ne.Z=w}}]);
