"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[1495],{97744:function(b,p,t){t.r(p),t.d(p,{default:function(){return k}});var e=t(32735),n=t(67879),d=t(43383),c=t(94638),m=t(27649),Z=t(17e3),h=t(87933),x=t(72850),v=t(49372),A=t(15335),f=t(5803),T=t(10369),y=t(41415),a=t(7961),u=t(60216),l=t.n(u),o=t(8471),g=t(80084),E=t(84967),i=t(85684);const R=o.ZP.a`
  color: ${({theme:r})=>r.colors.primary600};
`,C=({config:r})=>{const{formatMessage:s}=(0,n.Z)();return e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:1},e.createElement(v.Z,{variant:"delta",as:"h2"},s({id:(0,i.Z)("Settings.email.plugin.title.config"),defaultMessage:"Configuration"})),e.createElement(v.Z,null,s({id:(0,i.Z)("Settings.email.plugin.text.configuration"),defaultMessage:"The plugin is configured through the {file} file, checkout this {link} for the documentation."},{file:"./config/plugins.js",link:e.createElement(R,{href:"https://docs.strapi.io/developer-docs/latest/plugins/email.html",target:"_blank",rel:"noopener noreferrer"},s({id:(0,i.Z)("link"),defaultMessage:"Link"}))}))),e.createElement(A.r,{gap:5},e.createElement(f.P,{col:6,s:12},e.createElement(T.o,{name:"shipper-email",label:s({id:(0,i.Z)("Settings.email.plugin.label.defaultFrom"),defaultMessage:"Default sender email"}),placeholder:s({id:(0,i.Z)("Settings.email.plugin.placeholder.defaultFrom"),defaultMessage:"ex: Strapi No-Reply '<'no-reply@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:r.settings.defaultFrom})),e.createElement(f.P,{col:6,s:12},e.createElement(T.o,{name:"response-email",label:s({id:(0,i.Z)("Settings.email.plugin.label.defaultReplyTo"),defaultMessage:"Default response email"}),placeholder:s({id:(0,i.Z)("Settings.email.plugin.placeholder.defaultReplyTo"),defaultMessage:"ex: Strapi '<'example@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:r.settings.defaultReplyTo})),e.createElement(f.P,{col:6,s:12},e.createElement(g.P,{name:"email-provider",label:s({id:(0,i.Z)("Settings.email.plugin.label.provider"),defaultMessage:"Email provider"}),disabled:!0,onChange:()=>{},value:r.provider},e.createElement(E.W,{value:r.provider},r.provider)))))};C.propTypes={config:l().shape({provider:l().string,settings:l().shape({defaultFrom:l().string,defaultReplyTo:l().string})}).isRequired};var L=C,I=t(24346),D=I.Ry().shape({email:I.Z_().email(d.I0.email).required(d.I0.required)}),V=t(59990);const w=async()=>{const{get:r}=(0,d.tg)(),{data:s}=await r("/email/settings");return s.config},z=async r=>{const{post:s}=(0,d.tg)();await s("/email/test",r)};var N=t(82055),O=()=>{const{formatMessage:r}=(0,n.Z)();return e.createElement(e.Fragment,null,e.createElement(d.SL,{name:r({id:(0,i.Z)("Settings.email.plugin.title"),defaultMessage:"Configuration"})}),e.createElement(N.T,{id:"title",title:r({id:(0,i.Z)("Settings.email.plugin.title"),defaultMessage:"Configuration"}),subtitle:r({id:(0,i.Z)("Settings.email.plugin.subTitle"),defaultMessage:"Test the settings for the Email plugin"})}))};const G=()=>e.createElement(d.O4,{permissions:V.Z.settings},e.createElement($,null)),$=()=>{const r=(0,d.lm)(),{formatMessage:s}=(0,n.Z)(),{lockApp:J,unlockApp:Q}=(0,d.o1)(),{notifyStatus:F}=(0,c.G)();(0,d.go)();const[P,X]=(0,e.useState)({}),[Y,H]=(0,e.useState)(!1),[W,j]=(0,e.useState)(!1),[S,K]=(0,e.useState)(""),[q,U]=(0,e.useState)(!1),[_,ee]=(0,e.useState)({provider:"",settings:{defaultFrom:"",defaultReplyTo:"",testAddress:""}});(0,e.useEffect)(()=>{H(!0),w().then(M=>{F(s({id:(0,i.Z)("Settings.email.plugin.notification.data.loaded"),defaultMessage:"Email settings data has been loaded"})),ee(M);const B=M?.settings?.testAddress;B&&K(B)}).catch(()=>r({type:"warning",message:s({id:(0,i.Z)("Settings.email.plugin.notification.config.error"),defaultMessage:"Failed to retrieve the email config"})})).finally(()=>H(!1))},[s,r,F]),(0,e.useEffect)(()=>{P.email&&document.querySelector("#test-address-input").focus()},[P]),(0,e.useEffect)(()=>{D.validate({email:S},{abortEarly:!1}).then(()=>U(!0)).catch(()=>U(!1))},[S]);const te=M=>{K(()=>M.target.value)},ne=async M=>{M.preventDefault();try{await D.validate({email:S},{abortEarly:!1}),j(!0),J(),z({to:S}).then(()=>{r({type:"success",message:s({id:(0,i.Z)("Settings.email.plugin.notification.test.success"),defaultMessage:"Email test succeeded, check the {to} mailbox"},{to:S})})}).catch(()=>{r({type:"warning",message:s({id:(0,i.Z)("Settings.email.plugin.notification.test.error"),defaultMessage:"Failed to send a test mail to {to}"},{to:S})})}).finally(()=>{j(!1),Q()})}catch(B){X((0,d.CJ)(B))}};return Y?e.createElement(m.o,{labelledBy:"title","aria-busy":"true"},e.createElement(O,null),e.createElement(Z.D,null,e.createElement(d.dO,null))):e.createElement(m.o,{labelledBy:"title","aria-busy":W},e.createElement(O,null),e.createElement(Z.D,null,e.createElement("form",{onSubmit:ne},e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:7},e.createElement(x.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(L,{config:_})),e.createElement(x.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(v.Z,{variant:"delta",as:"h2"},s({id:(0,i.Z)("Settings.email.plugin.title.test"),defaultMessage:"Test email delivery"})),e.createElement(A.r,{gap:5,alignItems:"end"},e.createElement(f.P,{col:6,s:12},e.createElement(T.o,{id:"test-address-input",name:"test-address",onChange:te,label:s({id:(0,i.Z)("Settings.email.plugin.label.testAddress"),defaultMessage:"Recipient email"}),value:S,error:P.email?.id&&s({id:(0,i.Z)(`${P.email?.id}`),defaultMessage:"This is an invalid email"}),placeholder:s({id:(0,i.Z)("Settings.email.plugin.placeholder.testAddress"),defaultMessage:"ex: developer@example.com"})})),e.createElement(f.P,{col:7,s:12},e.createElement(y.z,{loading:W,disabled:!q,type:"submit",startIcon:e.createElement(a.Z,null)},s({id:(0,i.Z)("Settings.email.plugin.button.test-email"),defaultMessage:"Send test email"}))))))))))};var k=G},17e3:function(b,p,t){t.d(p,{D:function(){return c}});var e=t(32735),n=t(60216),d=t(72850);const c=({children:m})=>e.createElement(d.x,{paddingLeft:10,paddingRight:10},m);c.propTypes={children:n.node.isRequired}},82055:function(b,p,t){t.d(p,{T:function(){return f}});var e=t(32735),n=t(60216),d=t(8471),c=t(72850),m=t(87933);const Z=a=>{const u=(0,e.useRef)(null),[l,o]=(0,e.useState)(!0),g=([E])=>{o(E.isIntersecting)};return(0,e.useEffect)(()=>{const E=u.current,i=new IntersectionObserver(g,a);return E&&i.observe(u.current),()=>{E&&i.disconnect()}},[u,a]),[u,l]};var h=t(63060);const x=(a,u)=>{const l=(0,h.W)(u);(0,e.useLayoutEffect)(()=>{const o=new ResizeObserver(l);return Array.isArray(a)?a.forEach(g=>{g.current&&o.observe(g.current)}):a.current&&o.observe(a.current),()=>{o.disconnect()}},[a,l])};var v=t(49372);const A=()=>{const a=(0,e.useRef)(null),[u,l]=(0,e.useState)(null),[o,g]=Z({root:null,rootMargin:"0px",threshold:0});return x(o,()=>{o.current&&l(o.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&l(a.current.getBoundingClientRect())},[a]),{containerRef:o,isVisible:g,baseHeaderLayoutRef:a,headerSize:u}},f=a=>{const{containerRef:u,isVisible:l,baseHeaderLayoutRef:o,headerSize:g}=A();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:g?.height},ref:u},l&&e.createElement(y,{ref:o,...a})),!l&&e.createElement(y,{...a,sticky:!0,width:g?.width}))};f.displayName="HeaderLayout";const T=(0,d.ZP)(c.x)`
  width: ${a=>a.width}px;
`,y=e.forwardRef(({navigationAction:a,primaryAction:u,secondaryAction:l,subtitle:o,title:g,sticky:E,width:i,...R},C)=>{const L=typeof o=="string";return E?e.createElement(T,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:i,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(m.k,{justifyContent:"space-between"},e.createElement(m.k,null,a&&e.createElement(c.x,{paddingRight:3},a),e.createElement(c.x,null,e.createElement(v.Z,{variant:"beta",as:"h1",...R},g),L?e.createElement(v.Z,{variant:"pi",textColor:"neutral600"},o):o),l?e.createElement(c.x,{paddingLeft:4},l):null),e.createElement(m.k,null,u?e.createElement(c.x,{paddingLeft:2},u):void 0))):e.createElement(c.x,{ref:C,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:a?6:8,background:"neutral100","data-strapi-header":!0},a?e.createElement(c.x,{paddingBottom:2},a):null,e.createElement(m.k,{justifyContent:"space-between"},e.createElement(m.k,{minWidth:0},e.createElement(v.Z,{as:"h1",variant:"alpha",...R},g),l?e.createElement(c.x,{paddingLeft:4},l):null),u),L?e.createElement(v.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},o):o)});y.displayName="BaseHeaderLayout",y.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},y.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,sticky:n.bool,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired,width:n.number},f.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},f.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired}},27649:function(b,p,t){t.d(p,{o:function(){return m}});var e=t(32735),n=t(60216),d=t(8471);const c=d.ZP.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,m=({labelledBy:Z,...h})=>{const x=Z||"main-content-title";return e.createElement(c,{"aria-labelledby":x,id:"main-content",tabIndex:-1,...h})};m.defaultProps={labelledBy:void 0},m.propTypes={labelledBy:n.string}},7961:function(b,p,t){t.d(p,{Z:function(){return d}});var e=t(74512);const n=c=>(0,e.jsxs)("svg",{width:"1rem",height:"1rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...c,children:[(0,e.jsx)("path",{d:"M0 2.8A.8.8 0 0 1 .8 2h22.4a.8.8 0 0 1 .8.8v2.71a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V2.8Z",fill:"#32324D"}),(0,e.jsx)("path",{d:"M1.922 7.991C.197 6.675 0 6.252 0 5.289h23.953c.305 1.363-1.594 2.506-2.297 3.125-1.953 1.363-6.253 4.36-7.828 5.45-1.575 1.09-3.031.455-3.562 0-2.063-1.41-6.62-4.557-8.344-5.873ZM22.8 18H1.2c-.663 0-1.2.471-1.2 1.053v1.894C0 21.529.537 22 1.2 22h21.6c.663 0 1.2-.471 1.2-1.053v-1.894c0-.582-.537-1.053-1.2-1.053Z",fill:"#32324D"}),(0,e.jsx)("path",{d:"M0 9.555v10.972h24V9.554c-2.633 1.95-8.367 6.113-9.96 7.166-1.595 1.052-3.352.438-4.032 0L0 9.555Z",fill:"#32324D"})]}),d=n}}]);
