(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[2282],{51509:function(b,E,t){"use strict";t.r(E),t.d(E,{ProvidersPage:function(){return ue},default:function(){return Ze}});var e=t(32735),a=t(67879),n=t(43383),r=t(23973),s=t.n(r),u=t(23940),i=t.n(u),o=t(94638),f=t(96709),P=t(27649),m=t(82055),g=t(17e3),T=t(56755),c=t(33827),y=t(94547),l=t(19786),v=t(49372),O=t(3685),U=t(35658),I=t(50563),G=t(68625),N=t(20108),p=t(24346),x=t(59677);const ne={id:(0,x.OB)("PopUpForm.Providers.redirectURL.front-end.label"),defaultMessage:"The redirect URL to your front-end app"},ae={id:"http://www.client-app.com",defaultMessage:"http://www.client-app.com"},Q={id:(0,x.OB)("PopUpForm.Providers.enabled.description"),defaultMessage:"If disabled, users won't be able to use this provider."},J={id:(0,x.OB)("PopUpForm.Providers.enabled.label"),defaultMessage:"Enable"},re={id:(0,x.OB)("PopUpForm.Providers.key.label"),defaultMessage:"Client ID"},se={id:(0,x.OB)("PopUpForm.Providers.redirectURL.label"),defaultMessage:"The redirect URL to add in your {provider} application configurations"},$={id:(0,x.OB)("PopUpForm.Providers.key.placeholder"),defaultMessage:"TEXT"},ie={id:(0,x.OB)("PopUpForm.Providers.secret.label"),defaultMessage:"Client Secret"};var Y={email:{form:[[{intlLabel:J,name:"enabled",type:"bool",description:Q,size:6}]],schema:p.Ry().shape({enabled:p.Xg().required(n.I0.required)})},providers:{form:[[{intlLabel:J,name:"enabled",type:"bool",description:Q,size:6,validations:{required:!0}}],[{intlLabel:re,name:"key",type:"text",placeholder:$,size:12,validations:{required:!0}}],[{intlLabel:ie,name:"secret",type:"text",placeholder:$,size:12,validations:{required:!0}}],[{intlLabel:ne,placeholder:ae,name:"callback",type:"text",size:12,validations:{required:!0}}],[{intlLabel:se,name:"noName",type:"text",validations:{},size:12,disabled:!0}]],schema:p.Ry().shape({enabled:p.Xg().required(n.I0.required),key:p.Z_().when("enabled",{is:!0,then:p.Z_().required(n.I0.required),otherwise:p.Z_()}),secret:p.Z_().when("enabled",{is:!0,then:p.Z_().required(n.I0.required),otherwise:p.Z_()}),callback:p.Z_().when("enabled",{is:!0,then:p.Z_().required(n.I0.required),otherwise:p.Z_()})})},providersWithSubdomain:{form:[[{intlLabel:J,name:"enabled",type:"bool",description:Q,size:6,validations:{required:!0}}],[{intlLabel:re,name:"key",type:"text",placeholder:$,size:12,validations:{required:!0}}],[{intlLabel:ie,name:"secret",type:"text",placeholder:$,size:12,validations:{required:!0}}],[{intlLabel:{id:(0,x.OB)({id:"PopUpForm.Providers.jwksurl.label"}),defaultMessage:"JWKS URL"},name:"jwksurl",type:"text",placeholder:$,size:12,validations:{required:!1}}],[{intlLabel:{id:(0,x.OB)("PopUpForm.Providers.subdomain.label"),defaultMessage:"Host URI (Subdomain)"},name:"subdomain",type:"text",placeholder:{id:(0,x.OB)("PopUpForm.Providers.subdomain.placeholder"),defaultMessage:"my.subdomain.com"},size:12,validations:{required:!0}}],[{intlLabel:ne,placeholder:ae,name:"callback",type:"text",size:12,validations:{required:!0}}],[{intlLabel:se,name:"noName",type:"text",validations:{},size:12,disabled:!0}]],schema:p.Ry().shape({enabled:p.Xg().required(n.I0.required),key:p.Z_().when("enabled",{is:!0,then:p.Z_().required(n.I0.required),otherwise:p.Z_()}),secret:p.Z_().when("enabled",{is:!0,then:p.Z_().required(n.I0.required),otherwise:p.Z_()}),subdomain:p.Z_().when("enabled",{is:!0,then:p.Z_().required(n.I0.required),otherwise:p.Z_()}),callback:p.Z_().when("enabled",{is:!0,then:p.Z_().required(n.I0.required),otherwise:p.Z_()})})}};const pe=async h=>{try{const{get:B}=(0,n.tg)(),{data:A}=await B((0,x.Gc)("providers"));return A}catch{throw h({type:"warning",message:{id:"notification.error"}}),new Error("error")}},fe=h=>{const{put:B}=(0,n.tg)();return B((0,x.Gc)("providers"),h)};var ve=t(98978),ge=t.n(ve),he=h=>ge()(Object.keys(h).reduce((B,A)=>{const{icon:Z,enabled:R,subdomain:j}=h[A],C=Z==="envelope"?["fas","envelope"]:["fab",Z];return j!==void 0?B.push({name:A,icon:C,enabled:R,subdomain:j}):B.push({name:A,icon:C,enabled:R}),B},[]),"name"),oe=t(88369),Ee=t(85025),ye=t(55225),le=t(11299),be=t(31600),Pe=t(87933),Me=t(15335),xe=t(5803),Oe=t(11406),de=t(41415),Be=t(60216),d=t.n(Be),Le=t(92802),Te=t(9139),Re=t(10369);const w=({description:h,disabled:B,intlLabel:A,error:Z,name:R,onChange:j,placeholder:C,providerToEditName:W,type:F,value:M})=>{const{formatMessage:D}=(0,a.Z)(),z=R==="noName"?`${strapi.backendURL}/api/connect/${W}/callback`:M,K=D({id:A.id,defaultMessage:A.defaultMessage},{provider:W,...A.values}),S=h?D({id:h.id,defaultMessage:h.defaultMessage},{provider:W,...h.values}):"";if(F==="bool")return e.createElement(Te.s,{"aria-label":R,checked:M,disabled:B,hint:S,label:K,name:R,offLabel:D({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:D({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:H=>{j({target:{name:R,value:H.target.checked}})}});const q=C?D({id:C.id,defaultMessage:C.defaultMessage},{...C.values}):"",_=Z?D({id:Z,defaultMessage:Z}):"";return e.createElement(Re.o,{"aria-label":R,disabled:B,error:_,label:K,name:R,onChange:j,placeholder:q,type:F,value:z})};w.defaultProps={description:null,disabled:!1,error:"",placeholder:null,value:""},w.propTypes={description:d().shape({id:d().string.isRequired,defaultMessage:d().string.isRequired,values:d().object}),disabled:d().bool,error:d().string,intlLabel:d().shape({id:d().string.isRequired,defaultMessage:d().string.isRequired,values:d().object}).isRequired,name:d().string.isRequired,onChange:d().func.isRequired,placeholder:d().shape({id:d().string.isRequired,defaultMessage:d().string.isRequired,values:d().object}),providerToEditName:d().string.isRequired,type:d().string.isRequired,value:d().oneOfType([d().bool,d().string])};var Ae=w;const k=({headerBreadcrumbs:h,initialData:B,isSubmiting:A,layout:Z,isOpen:R,onSubmit:j,onToggle:C,providerToEditName:W})=>{const{formatMessage:F}=(0,a.Z)();return R?e.createElement(Ee.P,{onClose:C,labelledBy:"title"},e.createElement(ye.x,null,e.createElement(le.O,{label:h.join(", ")},h.map(M=>e.createElement(le.$,{key:M},M)))),e.createElement(Le.J9,{onSubmit:M=>j(M),initialValues:B,validationSchema:Z.schema,validateOnChange:!1},({errors:M,handleChange:D,values:z})=>e.createElement(n.l0,null,e.createElement(be.f,null,e.createElement(Pe.k,{direction:"column",alignItems:"stretch",gap:1},e.createElement(Me.r,{gap:5},Z.form.map(K=>K.map(S=>e.createElement(xe.P,{key:S.name,col:S.size,xs:12},e.createElement(Ae,{...S,error:M[S.name],onChange:D,value:z[S.name],providerToEditName:W}))))))),e.createElement(Oe.m,{startActions:e.createElement(de.z,{variant:"tertiary",onClick:C,type:"button"},F({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(de.z,{type:"submit",loading:A},F({id:"global.save",defaultMessage:"Save"}))})))):null};k.defaultProps={initialData:null,providerToEditName:null},k.propTypes={headerBreadcrumbs:d().arrayOf(d().string).isRequired,initialData:d().object,layout:d().shape({form:d().arrayOf(d().array),schema:d().object}).isRequired,isOpen:d().bool.isRequired,isSubmiting:d().bool.isRequired,onSubmit:d().func.isRequired,onToggle:d().func.isRequired,providerToEditName:d().string};var Ce=k;const ue=()=>{const{formatMessage:h}=(0,a.Z)();(0,n.go)();const{notifyStatus:B}=(0,o.G)(),A=(0,N.useQueryClient)(),{trackUsage:Z}=(0,n.rS)(),R=(0,e.useRef)(Z),[j,C]=(0,e.useState)(!1),[W,F]=(0,e.useState)(!1),[M,D]=(0,e.useState)(null),z=(0,n.lm)(),{lockApp:K,unlockApp:S}=(0,n.o1)(),q=(0,e.useMemo)(()=>({update:oe.Z.updateProviders}),[]),{isLoading:_,allowedActions:{canUpdate:H}}=(0,n.ss)(q),{isLoading:Ue,data:V,isFetching:De}=(0,N.useQuery)("get-providers",()=>pe(z),{onSuccess(){B(h({id:(0,x.OB)("Providers.data.loaded"),defaultMessage:"Providers have been loaded"}))},initialData:{}}),Se=Ue||De,je=(0,N.useMutation)(fe,{async onSuccess(){await A.invalidateQueries("get-providers"),z({type:"info",message:{id:(0,x.OB)("notification.success.submit")}}),R.current("didEditAuthenticationProvider"),F(!1),ee(),S()},onError(){z({type:"warning",message:{id:"notification.error"}}),S(),F(!1)},refetchActive:!1}),X=(0,e.useMemo)(()=>he(V),[V]),Fe=X.length,ce=(0,e.useMemo)(()=>{if(!M)return!1;const L=X.find(te=>te.name===M);return s()(L,"subdomain")},[X,M]),Ie=h({id:(0,x.OB)("HeaderNav.link.providers"),defaultMessage:"Providers"}),We=(0,e.useMemo)(()=>M==="email"?Y.email:ce?Y.providersWithSubdomain:Y.providers,[M,ce]),ee=()=>{C(L=>!L)},me=L=>{H&&(D(L.name),ee())},ze=async L=>{F(!0),K(),R.current("willEditAuthenticationProvider");const te={...V,[M]:L};je.mutate({providers:te})};return e.createElement(f.A,null,e.createElement(n.SL,{name:Ie}),e.createElement(P.o,null,e.createElement(m.T,{title:h({id:(0,x.OB)("HeaderNav.link.providers"),defaultMessage:"Providers"})}),Se||_?e.createElement(n.dO,null):e.createElement(g.D,null,e.createElement(T.i,{colCount:3,rowCount:Fe+1},e.createElement(c.h,null,e.createElement(y.Tr,null,e.createElement(l.Th,null,e.createElement(v.Z,{variant:"sigma",textColor:"neutral600"},h({id:"global.name",defaultMessage:"Name"}))),e.createElement(l.Th,null,e.createElement(v.Z,{variant:"sigma",textColor:"neutral600"},h({id:(0,x.OB)("Providers.status"),defaultMessage:"Status"}))),e.createElement(l.Th,null,e.createElement(v.Z,{variant:"sigma"},e.createElement(O.T,null,h({id:"global.settings",defaultMessage:"Settings"})))))),e.createElement(U.p,null,X.map(L=>e.createElement(y.Tr,{key:L.name,...(0,n.X7)({fn:()=>me(L),condition:H})},e.createElement(l.Td,{width:"45%"},e.createElement(v.Z,{fontWeight:"semiBold",textColor:"neutral800"},L.name)),e.createElement(l.Td,{width:"65%"},e.createElement(v.Z,{textColor:L.enabled?"success600":"danger600","data-testid":`enable-${L.name}`},L.enabled?h({id:"global.enabled",defaultMessage:"Enabled"}):h({id:"global.disabled",defaultMessage:"Disabled"}))),e.createElement(l.Td,{...n.UW},H&&e.createElement(I.h,{onClick:()=>me(L),noBorder:!0,icon:e.createElement(G.Z,null),label:"Edit"})))))))),e.createElement(Ce,{initialData:V[M],isOpen:j,isSubmiting:W,layout:We,headerBreadcrumbs:[h({id:(0,x.OB)("PopUpForm.header.edit.providers"),defaultMessage:"Edit Provider"}),i()(M)],onToggle:ee,onSubmit:ze,providerToEditName:M}))};var Ze=()=>e.createElement(n.O4,{permissions:oe.Z.readProviders},e.createElement(ue,null))},59677:function(b,E,t){"use strict";t.d(E,{YX:function(){return r},Gc:function(){return i},OB:function(){return o.Z}});var e=t(86834),a=t.n(e),r=f=>Object.keys(f).reduce((P,m)=>{const g=f[m].controllers,T=Object.keys(g).reduce((c,y)=>(a()(g[y])||(c[y]=g[y]),c),{});return a()(T)||(P[m]={controllers:T}),P},{}),s=t(90201),i=f=>`/${s.Z}/${f}`,o=t(82069)},56671:function(b,E,t){var e=t(35897),a=t(74741),n=a(e);b.exports=n},52920:function(b,E,t){var e=t(56671),a=t(81580);function n(r,s){var u=-1,i=a(r)?Array(r.length):[];return e(r,function(o,f,P){i[++u]=s(o,f,P)}),i}b.exports=n},50690:function(b,E,t){var e=t(26460),a=t(80166),n=t(88904),r=t(52920),s=t(36024),u=t(76535),i=t(1397),o=t(15362),f=t(77236);function P(m,g,T){g.length?g=e(g,function(l){return f(l)?function(v){return a(v,l.length===1?l[0]:l)}:l}):g=[o];var c=-1;g=e(g,u(n));var y=r(m,function(l,v,O){var U=e(g,function(I){return I(l)});return{criteria:U,index:++c,value:l}});return s(y,function(l,v){return i(l,v,T)})}b.exports=P},36024:function(b){function E(t,e){var a=t.length;for(t.sort(e);a--;)t[a]=t[a].value;return t}b.exports=E},40709:function(b,E,t){var e=t(22945);function a(n,r){if(n!==r){var s=n!==void 0,u=n===null,i=n===n,o=e(n),f=r!==void 0,P=r===null,m=r===r,g=e(r);if(!P&&!g&&!o&&n>r||o&&f&&m&&!P&&!g||u&&f&&m||!s&&m||!i)return 1;if(!u&&!o&&!g&&n<r||g&&s&&i&&!u&&!o||P&&s&&i||!f&&i||!m)return-1}return 0}b.exports=a},1397:function(b,E,t){var e=t(40709);function a(n,r,s){for(var u=-1,i=n.criteria,o=r.criteria,f=i.length,P=s.length;++u<f;){var m=e(i[u],o[u]);if(m){if(u>=P)return m;var g=s[u];return m*(g=="desc"?-1:1)}}return n.index-r.index}b.exports=a},74741:function(b,E,t){var e=t(81580);function a(n,r){return function(s,u){if(s==null)return s;if(!e(s))return n(s,u);for(var i=s.length,o=r?i:-1,f=Object(s);(r?o--:++o<i)&&u(f[o],o,f)!==!1;);return s}}b.exports=a},98978:function(b,E,t){var e=t(40314),a=t(50690),n=t(94569),r=t(63108),s=n(function(u,i){if(u==null)return[];var o=i.length;return o>1&&r(u,i[0],i[1])?i=[]:o>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),a(u,e(i,1),[])});b.exports=s},11299:function(b,E,t){"use strict";t.d(E,{$:function(){return f},O:function(){return P}});var e=t(74512),a=t(77277),n=t(8471),r=t(72850),s=t(87933),u=t(49372),i=t(3685);const o=(0,n.ZP)(s.k)`
  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
    path {
      fill: ${({theme:m})=>m.colors.neutral500};
    }
  }
  :last-of-type ${r.x} {
    display: none;
  }
  :last-of-type ${u.Z} {
    color: ${({theme:m})=>m.colors.neutral800};
    font-weight: ${({theme:m})=>m.fontWeights.bold};
  }
`,f=({children:m})=>(0,e.jsxs)(o,{inline:!0,as:"li",children:[(0,e.jsx)(u.Z,{variant:"pi",textColor:"neutral600",children:m}),(0,e.jsx)(r.x,{"aria-hidden":!0,paddingLeft:3,paddingRight:3,children:(0,e.jsx)(a.Z,{})})]});f.displayName="Crumb";const P=({children:m,label:g,...T})=>(0,e.jsxs)(s.k,{...T,children:[(0,e.jsx)(i.T,{children:g}),(0,e.jsx)("ol",{"aria-hidden":!0,children:m})]});P.displayName="Breadcrumbs"},17e3:function(b,E,t){"use strict";t.d(E,{D:function(){return r}});var e=t(32735),a=t(60216),n=t(72850);const r=({children:s})=>e.createElement(n.x,{paddingLeft:10,paddingRight:10},s);r.propTypes={children:a.node.isRequired}},82055:function(b,E,t){"use strict";t.d(E,{T:function(){return m}});var e=t(32735),a=t(60216),n=t(8471),r=t(72850),s=t(87933);const u=c=>{const y=(0,e.useRef)(null),[l,v]=(0,e.useState)(!0),O=([U])=>{v(U.isIntersecting)};return(0,e.useEffect)(()=>{const U=y.current,I=new IntersectionObserver(O,c);return U&&I.observe(y.current),()=>{U&&I.disconnect()}},[y,c]),[y,l]};var i=t(63060);const o=(c,y)=>{const l=(0,i.W)(y);(0,e.useLayoutEffect)(()=>{const v=new ResizeObserver(l);return Array.isArray(c)?c.forEach(O=>{O.current&&v.observe(O.current)}):c.current&&v.observe(c.current),()=>{v.disconnect()}},[c,l])};var f=t(49372);const P=()=>{const c=(0,e.useRef)(null),[y,l]=(0,e.useState)(null),[v,O]=u({root:null,rootMargin:"0px",threshold:0});return o(v,()=>{v.current&&l(v.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{c.current&&l(c.current.getBoundingClientRect())},[c]),{containerRef:v,isVisible:O,baseHeaderLayoutRef:c,headerSize:y}},m=c=>{const{containerRef:y,isVisible:l,baseHeaderLayoutRef:v,headerSize:O}=P();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:O?.height},ref:y},l&&e.createElement(T,{ref:v,...c})),!l&&e.createElement(T,{...c,sticky:!0,width:O?.width}))};m.displayName="HeaderLayout";const g=(0,n.ZP)(r.x)`
  width: ${c=>c.width}px;
`,T=e.forwardRef(({navigationAction:c,primaryAction:y,secondaryAction:l,subtitle:v,title:O,sticky:U,width:I,...G},N)=>{const p=typeof v=="string";return U?e.createElement(g,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:I,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(s.k,{justifyContent:"space-between"},e.createElement(s.k,null,c&&e.createElement(r.x,{paddingRight:3},c),e.createElement(r.x,null,e.createElement(f.Z,{variant:"beta",as:"h1",...G},O),p?e.createElement(f.Z,{variant:"pi",textColor:"neutral600"},v):v),l?e.createElement(r.x,{paddingLeft:4},l):null),e.createElement(s.k,null,y?e.createElement(r.x,{paddingLeft:2},y):void 0))):e.createElement(r.x,{ref:N,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:c?6:8,background:"neutral100","data-strapi-header":!0},c?e.createElement(r.x,{paddingBottom:2},c):null,e.createElement(s.k,{justifyContent:"space-between"},e.createElement(s.k,{minWidth:0},e.createElement(f.Z,{as:"h1",variant:"alpha",...G},O),l?e.createElement(r.x,{paddingLeft:4},l):null),y),p?e.createElement(f.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},v):v)});T.displayName="BaseHeaderLayout",T.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},T.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,sticky:a.bool,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired,width:a.number},m.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},m.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired}},96709:function(b,E,t){"use strict";t.d(E,{A:function(){return i}});var e=t(32735),a=t(60216),n=t(8471),r=t(72850);const s=(0,n.ZP)(r.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:o})=>o?"auto 1fr":"1fr"};
`,u=(0,n.ZP)(r.x)`
  overflow-x: hidden;
`,i=({sideNav:o,children:f})=>e.createElement(s,{hasSideNav:Boolean(o)},o,e.createElement(u,{paddingBottom:10},f));i.defaultProps={sideNav:void 0},i.propTypes={children:a.node.isRequired,sideNav:a.node}},27649:function(b,E,t){"use strict";t.d(E,{o:function(){return s}});var e=t(32735),a=t(60216),n=t(8471);const r=n.ZP.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,s=({labelledBy:u,...i})=>{const o=u||"main-content-title";return e.createElement(r,{"aria-labelledby":o,id:"main-content",tabIndex:-1,...i})};s.defaultProps={labelledBy:void 0},s.propTypes={labelledBy:a.string}}}]);
