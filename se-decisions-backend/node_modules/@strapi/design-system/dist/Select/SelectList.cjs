"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const S=require("react"),q=require("prop-types"),i=require("./constants.cjs"),h=require("./hooks/useListRef.cjs"),n=require("./utils.cjs"),v=require("../Flex/Flex.cjs"),c=require("../helpers/keyboardKeys.cjs"),b=r=>r&&typeof r=="object"&&"default"in r?r:{default:r},A=b(S),s=b(q),p=({labelledBy:r,onSelectItem:f,children:g,multi:y,onEscape:u,expanded:D})=>{const e=h.useListRef(D),K=o=>{switch(o.key){case c.KeyboardKeys.ESCAPE:{o.stopPropagation(),u();break}case c.KeyboardKeys.DOWN:{o.preventDefault();const t=n.getActiveDescendant(e.current);if(!t)return;const a=t.nextSibling;if(a)n.changeDescendant(e.current,a);else{const d=e.current.querySelectorAll('[role="option"]')[0];n.changeDescendant(e.current,d)}break}case c.KeyboardKeys.UP:{o.preventDefault();const t=n.getActiveDescendant(e.current);if(!t)return;const a=t.previousSibling;if(a)n.changeDescendant(e.current,a);else{const l=e.current.querySelectorAll('[role="option"]'),d=l[l.length-1];n.changeDescendant(e.current,d)}break}case c.KeyboardKeys.SPACE:case c.KeyboardKeys.ENTER:{o.preventDefault();const t=n.getActiveDescendant(e.current);t.getAttribute("data-opt-group")?f(t.getAttribute("data-opt-group-children").split(","),t.getAttribute("data-opt-group")):f(t.getAttribute("data-strapi-value")),y||u();break}}};return A.default.createElement(v.Flex,{as:"ul",gap:1,direction:"column",alignItems:"stretch",role:"listbox","aria-labelledby":r,tabIndex:-1,ref:e,onKeyDown:K,onBlur:u,"aria-multiselectable":y},g)};p.defaultProps={labelledBy:void 0,multi:!1};p.propTypes={children:s.default.node.isRequired,expanded:s.default.oneOf([i.UpState.Keyboard,i.UpState.Mouse,i.DownState.Keyboard,i.DownState.Mouse]).isRequired,labelledBy:s.default.string,multi:s.default.bool,onEscape:s.default.func.isRequired,onSelectItem:s.default.func.isRequired};exports.SelectList=p;
