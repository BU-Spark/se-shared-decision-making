"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const f=require("react"),$=require("./DateTimePickerProps.cjs"),y=require("./parseDate.cjs"),_=require("../DatePicker/DatePicker.cjs"),L=require("../Field/Field.cjs"),V=require("../Field/FieldLabel.cjs");require("../Field/FieldInput.cjs");const v=require("../Field/FieldHint.cjs"),C=require("../Field/FieldError.cjs");require("../Field/FieldContext.cjs");require("../Field/FieldAction.cjs");const S=require("../Flex/Flex.cjs"),R=require("../hooks/useId.cjs"),A=require("../TimePicker/TimePicker.cjs"),O=i=>i&&typeof i=="object"&&"default"in i?i:{default:i},s=O(f),P=({ariaLabel:i,clearLabel:T,disabled:k,error:p,hint:m,label:o,labelAction:H,onChange:a,onClear:D,name:j,required:F,selectButtonTitle:M,size:q,step:x,value:l,...E})=>{const d=y.parseDate(l),[r,n]=f.useState(d),[u,c]=f.useState(d?`${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}`:null),I=e=>{n(e);let t;u?(t=new Date(e),t.setHours(u.split(":")[0]),t.setMinutes(u.split(":")[1])):(t=new Date(e),c(`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`)),a&&a(t)},b=e=>{c(e);const t=r?new Date(r):new Date;t.setHours(e.split(":")[0]),t.setMinutes(e.split(":")[1]),r||n(t),a&&a(t)},h=()=>{n(void 0),c(void 0),D()},w=()=>{c(void 0);let e;r&&(e=new Date(r),e.setHours("00"),e.setMinutes("00")),a&&a(e)};f.useEffect(()=>{if(l&&+l!=+r){const e=y.parseDate(l);n(e),c(e?`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`:null)}else l||(n(void 0),c(void 0))},[l,r]);const g=R.useId(E?.id);return s.default.createElement(L.Field,{name:j,role:"group",id:g,"aria-labelledby":g,hint:m,error:p,required:F},s.default.createElement(S.Flex,{direction:"column",alignItems:"stretch",gap:1},o&&s.default.createElement(V.FieldLabel,{action:H},o),s.default.createElement(S.Flex,{gap:2},s.default.createElement(_.DatePicker,{"data-testid":"datetimepicker-date",id:g,name:j,ariaLabel:o||i,error:typeof p=="string",hint:typeof m=="string",selectedDate:r,selectedDateLabel:e=>`Date picker, current is ${e}`,onChange:I,required:F,size:q,onClear:D&&h,clearLabel:T,disabled:k,...E}),s.default.createElement(A.TimePicker,{"data-testid":"datetimepicker-time",size:q,"aria-label":o||i,error:typeof p=="string",hint:typeof m=="string",value:u,onChange:b,onClear:D&&w,clearLabel:T,required:F,selectButtonTitle:M,disabled:k,step:x})),s.default.createElement(v.FieldHint,null),s.default.createElement(C.FieldError,null)))};P.defaultProps=$.dateTimePickerDefaultProps;P.propTypes=$.dateTimePickerPropTypes;exports.DateTimePicker=P;
